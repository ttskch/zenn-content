---
title: "[Symfony] æ—¢å­˜ã®ã‚¢ãƒ—ãƒªã‚’æ©Ÿèƒ½ã”ã¨ã«ãƒãƒ³ãƒ‰ãƒ«ã«åˆ†å‰²ã—ãŸã¨ãã«ã‚„ã£ãŸã“ã¨ã¾ã¨ã‚"
emoji: "ğŸ»"
type: "tech"
topics: ["php", "symfony"]
published: true
published_at: 2020-08-06
---

:::message
ã“ã®è¨˜äº‹ã¯ã€2020-08-06ã«åˆ¥ã®ãƒ–ãƒ­ã‚°åª’ä½“ã«æŠ•ç¨¿ã—ãŸè¨˜äº‹ã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã§ã™ã€‚
:::

æ—¢å­˜ã®Symfonyã‚¢ãƒ—ãƒªã«å¤§ãã‚ã®æ©Ÿèƒ½è¿½åŠ ã‚’è¡Œã†ã“ã¨ã«ãªã‚Šã€ã•ã™ãŒã«ï¼ˆåºƒç¾©ã®ï¼‰ãƒ¢ãƒãƒªã‚¹ã§ã¯ç®¡ç†ã—ãã‚Œãªã„ãƒœãƒªãƒ¥ãƒ¼ãƒ ã«ãªã£ã¦ããŸã®ã§ã€æ—¢å­˜æ©Ÿèƒ½ã‚’ãƒãƒ³ãƒ‰ãƒ«ã«åˆ†å‰²ã—ã¾ã—ãŸã€‚

ãã®ã¨ãã«ã‚„ã£ãŸã“ã¨ã‚’å‚™å¿˜éŒ²ã¨ã—ã¦ã¾ã¨ã‚ã¦ãŠãã¾ã™ã€‚

# ã‚¢ãƒ—ãƒªã‚’ãƒãƒ³ãƒ‰ãƒ«ã«åˆ†å‰²ã™ã‚‹ã®ã¯NGï¼Ÿ

ã¡ãªã¿ã« [Symfonyã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://symfony.com/doc/current/bundles.html) ã«ã¯

> ![](https://tva1.sinaimg.cn/large/007S8ZIlgy1ghgzpwomwmj313o068gmq.jpg)
>
> In Symfony versions prior to 4.0, it was recommended to organize your own application code using bundles. This is no longer recommended and bundles should only be used to share code and features between multiple applications.

ã¨ã„ã†è¨˜è¼‰ãŒã‚ã‚Šã€ã‚¢ãƒ—ãƒªã‚’æ©Ÿèƒ½ã”ã¨ã«ãƒãƒ³ãƒ‰ãƒ«ã«åˆ†å‰²ã™ã‚‹ã®ã¯æ¨å¥¨ã•ã‚Œãªã„æ–¹æ³•ã®ã‚ˆã†ã§ã™ã€‚

æ­£ã—ãã‚„ã‚‹ãªã‚‰ã€Gitãƒªãƒã‚¸ãƒˆãƒªã”ã¨åˆ†ã‘ã¦ã€å„æ©Ÿèƒ½ã‚’ã€Œå†åˆ©ç”¨å¯èƒ½ãªãƒãƒ³ãƒ‰ãƒ«ã€ã¨ã—ã¦å®Ÿè£…ã—ã€ãƒ¡ã‚¤ãƒ³ã®ã‚¢ãƒ—ãƒªã«å„ãƒãƒ³ãƒ‰ãƒ«ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦å…¨ä½“ã‚’çµ„ã¿ç«‹ã¦ã‚‹ã“ã¨ã«ãªã‚‹ã®ã§ã—ã‚‡ã†ã‹ğŸ¤”ï¼ˆè©³ã—ã„æ–¹ã„ãŸã‚‰æ•™ãˆã¦ãã ã•ã„ğŸ™ï¼‰

ãã†ã¯è¨€ã£ã¦ã‚‚ç¾å®Ÿçš„ã«ã¯ä»¥å‰ã®ã‚ˆã†ã«ã‚¢ãƒ—ãƒªå†…ã«ãƒãƒ³ãƒ‰ãƒ«ã‚’è¤‡æ•°ä½œã‚ŠãŸã„ã‚±ãƒ¼ã‚¹ã¯å¤šã„ã¨æ€ã†ã®ã§ã€ä»Šå›ã¯éæ¨å¥¨ã§ã‚ã‚‹ã“ã¨ã«ã¯ç›®ã‚’ã¤ã¶ã£ã¦ã„ãŸã ã„ã¦ğŸ™ˆã€æ•™é¤Šã¨ã—ã¦èª­ã‚“ã§ã‚‚ã‚‰ãˆãŸã‚‰ã„ã„ã‹ãªã¨æ€ã„ã¾ã™ğŸ˜…

# 1. `src` é…ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒãƒ³ãƒ‰ãƒ«ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•

ã¾ãšã€ `src` é…ä¸‹ã« `Bundle/ãƒãƒ³ãƒ‰ãƒ«å` ã¨ã„ã†ãƒ‘ã‚¹ã§ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åˆ‡ã‚Šã€å„ç¨®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã“ã“ã«ç§»å‹•ã—ã¾ã™ã€‚

**Before**

```
.
â””â”€â”€ src
 Â Â  â”œâ”€â”€ Command
 Â Â  â”œâ”€â”€ Controller
 Â Â  â”œâ”€â”€ Entity
 Â Â  â”œâ”€â”€ EntityListener
 Â Â  â”œâ”€â”€ Event
 Â Â  â”œâ”€â”€ EventSubscriber
 Â Â  â”œâ”€â”€ Form
 Â Â  â”œâ”€â”€ Repository
 Â Â  â”œâ”€â”€ Security
 Â Â  â”œâ”€â”€ Twig
 Â Â  â”œâ”€â”€ Validator
 Â Â  â””â”€â”€ Kernel.php
```

**After**

```
.
â””â”€â”€ src
    â”œâ”€â”€ Bundle
    â”‚Â Â  â”œâ”€â”€ AppBundle
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Command
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Controller
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Entity
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ EntityListener
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Form
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Repository
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Security
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Twig
    â”‚Â Â  â”‚Â Â  â””â”€â”€ Validator
    â”‚Â Â  â””â”€â”€ FooBundle
    â”‚Â Â      â”œâ”€â”€ Controller
    â”‚Â Â      â”œâ”€â”€ Entity
    â”‚Â Â      â”œâ”€â”€ EntityListener
    â”‚Â Â      â”œâ”€â”€ Event
    â”‚Â Â      â”œâ”€â”€ EventSubscriber
    â”‚Â Â      â”œâ”€â”€ Form
    â”‚Â Â      â”œâ”€â”€ Repository
    â”‚Â Â      â”œâ”€â”€ Twig
    â”‚Â Â      â””â”€â”€ Validator
    â””â”€â”€ Kernel.php
```

ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼å‘¨ã‚Šã‚„æ©Ÿèƒ½ã«ä¾ã‚‰ãªã„å…±é€šéƒ¨å“ã£ã½ã„ã‚‚ã®ã‚’ `AppBundle` ã«ã€ `Foo` æ©Ÿèƒ½ã«é–¢é€£ã™ã‚‹ã‚‚ã®ã‚’ `FooBundle` ã«æŒ¯ã‚Šåˆ†ã‘ã‚‹ã¨ã‚ˆã„ã§ã—ã‚‡ã†ã€‚

ç§»å‹•ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã® `namespace` ã¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½ç½®ã«åˆã‚ã›ã¦é©åˆ‡ã«å¤‰æ›´ã—ã€ãã®ã‚¯ãƒ©ã‚¹ã‚’å‚ç…§ã—ã¦ã„ã‚‹ä»–ã®ãƒ•ã‚¡ã‚¤ãƒ«ã® `use` æ–‡ã‚‚ã‚ã‚ã›ã¦å¤‰æ›´ã—ã¾ã™ã€‚

ã“ã‚ŒãŒä¸€ç•ªå¤§å¤‰ãªä½œæ¥­ã ã¨æ€ã„ã¾ã™ã€‚IDEã®åŠ›ã‚’å€Ÿã‚Šã¤ã¤é ‘å¼µã‚Šã¾ã—ã‚‡ã†ğŸ’ª

# 2. ãƒãƒ³ãƒ‰ãƒ«ã‚’ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«ç™»éŒ²

`src/Bundle/AppBundle/AppBundle.php` ãŠã‚ˆã³ `src/Bundle/FooBundle/FooBundle.php` ã‚’ä½œæˆã—ã¾ã™ã€‚

```php
<?php
namespace App\Bundle\AppBundle;

use Symfony\Component\HttpKernel\Bundle\Bundle;

class AppBundle extends Bundle
{
}
```

```php
<?php
namespace App\Bundle\FooBundle;

use Symfony\Component\HttpKernel\Bundle\Bundle;

class FooBundle extends Bundle
{
}
```

ãã—ã¦ã“ã‚Œã‚‰ã‚’ `config/bundles.php` ã«ç™»éŒ²ã—ã¾ã™ã€‚

```php
<?php

return [
    // ...
    App\Bundle\AppBundle\AppBundle::class => ['all' => true],
    App\Bundle\FooBundle\FooBundle::class => ['all' => true],
];
```

# 3. `templates` é…ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç§»å‹•

å„ãƒãƒ³ãƒ‰ãƒ«ã« `Resources/views` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã€ `templates` é…ä¸‹ã®ãƒ“ãƒ¥ãƒ¼ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãã“ã«ç§»å‹•ã—ã¾ã™ã€‚

**Before**

```
.
â””â”€â”€ templates
    â”œâ”€â”€ home
    â”‚   â”œâ”€â”€ index.html.twig
    â”‚   â”œâ”€â”€ show.html.twig
    â”‚   â”œâ”€â”€ new.html.twig
    â”‚   â””â”€â”€ edit.html.twig
    â”œâ”€â”€ user
    â”‚   â”œâ”€â”€ index.html.twig
    â”‚   â”œâ”€â”€ show.html.twig
    â”‚   â”œâ”€â”€ new.html.twig
    â”‚   â””â”€â”€ edit.html.twig
    â”œâ”€â”€ bar
    â”‚   â”œâ”€â”€ index.html.twig
    â”‚   â”œâ”€â”€ show.html.twig
    â”‚   â”œâ”€â”€ new.html.twig
    â”‚   â””â”€â”€ edit.html.twig
    â”œâ”€â”€ baz
    â”‚   â”œâ”€â”€ index.html.twig
    â”‚   â”œâ”€â”€ show.html.twig
    â”‚   â”œâ”€â”€ new.html.twig
    â”‚   â””â”€â”€ edit.html.twig
 Â Â  â””â”€â”€ base.html.twig
```

**After**

```
.
â””â”€â”€ src
    â”œâ”€â”€ Bundle
    â”‚Â Â  â”œâ”€â”€ AppBundle
    â”‚   â”‚   :
    â”‚   â”‚   :
    â”‚Â Â  â”‚   â”œâ”€â”€ Resources
    â”‚   â”‚   â”‚   â””â”€â”€ views
    â”‚   â”‚   â”‚       â”œâ”€â”€ home
    â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ index.html.twig
    â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ show.html.twig
    â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ new.html.twig
    â”‚   â”‚   â”‚       â”‚   â””â”€â”€ edit.html.twig
    â”‚   â”‚   â”‚       â”œâ”€â”€ user
    â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ index.html.twig
    â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ show.html.twig
    â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ new.html.twig
    â”‚   â”‚   â”‚       â”‚   â””â”€â”€ edit.html.twig
    â”‚Â Â  â”‚   â”‚       â””â”€â”€ base.html.twig
    â”‚Â Â  â”‚   â””â”€â”€ AppBundle.php
    â”‚Â Â  â””â”€â”€ FooBundle
    â”‚       :
    â”‚       :
    â”‚Â Â      â”œâ”€â”€ Resources
    â”‚       â”‚   â””â”€â”€ views
    â”‚       â”‚       â”œâ”€â”€ bar
    â”‚       â”‚       â”‚   â”œâ”€â”€ index.html.twig
    â”‚       â”‚       â”‚   â”œâ”€â”€ show.html.twig
    â”‚       â”‚       â”‚   â”œâ”€â”€ new.html.twig
    â”‚       â”‚       â”‚   â””â”€â”€ edit.html.twig
    â”‚       â”‚       â””â”€â”€ baz
    â”‚       â”‚           â”œâ”€â”€ index.html.twig
    â”‚       â”‚           â”œâ”€â”€ show.html.twig
    â”‚       â”‚           â”œâ”€â”€ new.html.twig
    â”‚       â”‚           â””â”€â”€ edit.html.twig
    â”‚Â Â      â””â”€â”€ FooBundle.php
    â””â”€â”€ Kernel.php
```

`extends` ã‚„ `include` ãªã©ã§ä»–ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã—ã¦ã„ã‚‹ç®‡æ‰€ãŒã‚ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒã©ã®ãƒãƒ³ãƒ‰ãƒ«ã«å±ã—ã¦ã„ã‚‹ã‹ã‚’æ˜è¨˜ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ã€è©²å½“ç®‡æ‰€ã™ã¹ã¦ã‚’ä¿®æ­£ã—ã¾ã™ã€‚

```diff
- {% extends 'base.html.twig' %}
+ {% extends '@App/base.html.twig' %}
```

# 4. ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç§»å‹•

å„ãƒãƒ³ãƒ‰ãƒ«ã« `Tests` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã€ `tests` é…ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãã“ã«ç§»å‹•ã—ã¾ã™ã€‚

**Before**

```
.
â””â”€â”€ tests
    â”œâ”€â”€ Controller
    â”‚   â”œâ”€â”€ HomeControllerTest.php
    â”‚   â”œâ”€â”€ UserControllerTest.php
    â”‚   â”œâ”€â”€ BarControllerTest.php
    â”‚   â””â”€â”€ BazControllerTest.php
    â”œâ”€â”€ Repository
    â”‚   â”œâ”€â”€ UserRepositoryTest.php
    â”‚   â”œâ”€â”€ BarRepositoryTest.php
    â”‚   â””â”€â”€ BazRepositoryTest.php
    â”œâ”€â”€ fixture
    â”‚   â”œâ”€â”€ Controller
    â”‚   â”‚   â”œâ”€â”€ HomeControllerTest.yaml
    â”‚   â”‚   â”œâ”€â”€ UserControllerTest.yaml
    â”‚   â”‚   â”œâ”€â”€ BarControllerTest.yaml
    â”‚   â”‚   â””â”€â”€ BazControllerTest.yaml
    â”‚   â””â”€â”€ Repository
    â”‚       â”œâ”€â”€ UserRepositoryTest.yaml
    â”‚       â”œâ”€â”€ BarControllerTest.yaml
    â”‚       â””â”€â”€ BazRepositoryTest.yaml
    â””â”€â”€ bootstrap.php
```

**After**

```
.
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ Bundle
â”‚   â”‚Â Â  â”œâ”€â”€ AppBundle
â”‚   â”‚   â”‚   :
â”‚   â”‚   â”‚   :
â”‚   â”‚Â Â  â”‚   â”œâ”€â”€ Tests
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Controller
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ HomeControllerTest.php
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UserControllerTest.php
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Repository
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UserRepositoryTest.php
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ fixture
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ Controller
â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ HomeControllerTest.yaml
â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ UserControllerTest.yaml
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ Repository
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ UserRepositoryTest.yaml
â”‚   â”‚Â Â  â”‚   â””â”€â”€ AppBundle.php
â”‚   â”‚Â Â  â””â”€â”€ FooBundle
â”‚   â”‚       :
â”‚   â”‚       :
â”‚   â”‚Â Â      â”œâ”€â”€ Tests
â”‚   â”‚       â”‚   â”œâ”€â”€ Controller
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ BarControllerTest.php
â”‚   â”‚       â”‚   â”‚   â””â”€â”€ BazControllerTest.php
â”‚   â”‚       â”‚   â”œâ”€â”€ Repository
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ BarRepositoryTest.php
â”‚   â”‚       â”‚   â”‚   â””â”€â”€ BazRepositoryTest.php
â”‚   â”‚       â”‚   â””â”€â”€ fixture
â”‚   â”‚       â”‚       â”œâ”€â”€ Controller
â”‚   â”‚       â”‚       â”‚   â”œâ”€â”€ BarControllerTest.yaml
â”‚   â”‚       â”‚       â”‚   â””â”€â”€ BazControllerTest.yaml
â”‚   â”‚       â”‚       â””â”€â”€ Repository
â”‚   â”‚       â”‚           â”œâ”€â”€ BarRepositoryTest.yaml
â”‚   â”‚       â”‚           â””â”€â”€ BazRepositoryTest.yaml
â”‚   â”‚Â Â      â””â”€â”€ FooBundle.php
â”‚   â””â”€â”€ Kernel.php
â””â”€â”€ tests
    â””â”€â”€ bootstrap.php
```

ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚³ãƒ¼ãƒ‰åŒæ§˜ã€namespaceã®å¤‰æ›´ãŒå¿…è¦ã§ã™ã€‚

ç¶šã‘ã¦ã€ `phpunit.xml.dist` ã‚’ä¿®æ­£ã—ã¾ã™ã€‚

```diff
  <?xml version="1.0" encoding="UTF-8"?>
  
  <!-- https://phpunit.readthedocs.io/en/latest/configuration.html -->
  <phpunit xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:noNamespaceSchemaLocation="bin/.phpunit/phpunit.xsd"
           backupGlobals="false"
           colors="true"
           bootstrap="tests/bootstrap.php"
  >
      <php>
          <ini name="error_reporting" value="-1" />
          <server name="APP_ENV" value="test" force="true" />
          <server name="SHELL_VERBOSITY" value="-1" />
          <server name="SYMFONY_PHPUNIT_REMOVE" value="" />
          <server name="SYMFONY_PHPUNIT_VERSION" value="7.5" />
      </php>
  
      <testsuites>
-         <testsuite name="Project Test Suite">
-               <directory>tests</directory>
-         </testsuite>
+         <testsuite name="AppBundle">
+             <directory>src/Bundle/AppBundle/Tests</directory>
+         </testsuite>
+         <testsuite name="FooBundle">
+             <directory>src/Bundle/FooBundle/Tests</directory>
+         </testsuite>
      </testsuites>
  
      <filter>
          <whitelist processUncoveredFilesFromWhitelist="true">
              <directory suffix=".php">src</directory>
          </whitelist>
      </filter>
  
      <listeners>
          <listener class="Symfony\Bridge\PhpUnit\SymfonyTestsListener" />
      </listeners>
  </phpunit>
```

[liip/test-fixtures-bundle](https://github.com/liip/LiipTestFixturesBundle) ãªã©ã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã¯ã€ãƒ•ã‚£ã‚¯ã‚¹ãƒãƒ£å®šç¾©ã®YAMLãƒ•ã‚¡ã‚¤ãƒ«å†…ã§ã‚‚ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®FQCNã‚’ä¿®æ­£ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§æ³¨æ„ã—ã¾ã—ã‚‡ã†ã€‚

```diff
- App\Entity\User:
+ App\Bundle\AppBundle\Entity\User:
    user1:
      email: user1@test.com
      plainPassword: password
```

# 5. ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’è¨­å®š

å„ãƒãƒ³ãƒ‰ãƒ«ã« `Resources/config/routing.yaml` ã‚’è¿½åŠ ã—ã€ä¸¡æ–¹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ä»¥ä¸‹ã®å†…å®¹ã‚’è¨˜è¿°ã—ã¾ã™ã€‚

```yaml
controllers:
  resource: ../../Controller/
  type: annotation
```

ãã—ã¦ã€ `config/routes.yaml` ã«ä»¥ä¸‹ã‚’è¿½è¨˜ã—ã¾ã™ã€‚

```yaml
app_bundle:
  resource: '@AppBundle/Resources/config/routing.yaml'

foo_bundle:
  resource: '@FooBundle/Resources/config/routing.yaml'
```

`config/routes/annotations.yaml` ã«ä»¥ä¸‹ã®ã‚ˆã†ãªå†…å®¹ãŒè¨˜è¿°ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€ä¸è¦ãªã®ã§å‰Šé™¤ã—ã¾ã™ã€‚

```diff
- controllers:
-     resource: ../../src/Controller/
-     type: annotation
```

# 6. `doctrine.yaml` ã‚’ä¿®æ­£

`config/packages/doctrine.yaml` ã§ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ãƒãƒƒãƒ”ãƒ³ã‚°è¨­å®šã‚’ä¿®æ­£ã—ã¾ã™ã€‚

```diff
  doctrine:
      orm:
          mappings:
              App:
                  is_bundle: false
                  type: annotation
-                 dir: '%kernel.project_dir%/src/Entity'
-                 prefix: 'App\Entity'
+                 dir: '%kernel.project_dir%/src/Bundle/AppBundle/Entity'
+                 prefix: 'App\Bundle\AppBundle\Entity'
                  alias: App
+             Foo:
+                 is_bundle: false
+                 type: annotation
+                 dir: '%kernel.project_dir%/src/Bundle/FooBundle/Entity'
+                 prefix: 'App\Bundle\FooBundle\Entity'
+                 alias: Foo
```

# 7. `security.yaml` ã‚’ä¿®æ­£

`config/packages/security.yaml` ã« `User` ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚„Guardã‚¯ãƒ©ã‚¹ã®FQCNãŒæ›¸ã„ã¦ã‚ã‚‹ã®ã§ã€ã“ã‚Œã‚‚ä¿®æ­£ã—ã¾ã™ã€‚

```diff
  security:
      encoders:
-         App\Entity\User:
+         App\Bundle\AppBundle\Entity\User:
              algorithm: bcrypt
  
      providers:
          app_user_provider:
              entity:
-                 class: App\Entity\User
+                 class: App\Bundle\AppBundle\Entity\User
                  property: email
      firewalls:
          dev:
              pattern: ^/(_(profiler|wdt)|css|images|js)/
              security: false
          main:
              anonymous: lazy
              provider: app_user_provider
              guard:
                  authenticators:
-                     - App\Security\LoginFormAuthenticator
+                     - App\Bundle\AppBundle\Security\LoginFormAuthenticator
              logout:
                  path: user_logout
                  target: user_login
  
              switch_user: true
  
              remember_me:
                  secret: '%kernel.secret%'
```

# 8. `services.yaml` ã‚’ä¿®æ­£

`config/services.yaml` ã«ã‚‚ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã«ä¾å­˜ã—ãŸè¨­å®šãŒã„ã‚ã„ã‚ã‚ã‚‹ã¯ãšãªã®ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ãªè¦é ˜ã§ä¿®æ­£ã—ã¾ã™ã€‚

```diff
  parameters:
  
  services:
      _defaults:
          autowire: true      # Automatically injects dependencies in your services.
          autoconfigure: true # Automatically registers your services as commands, event subscribers, etc.
  
      App\:
          resource: '../src/*'
          exclude: '../src/{DependencyInjection,Entity,Migrations,Tests,Kernel.php}'
  
      #
      # Controllers
      #
  
-     App\Controller\:
-         resource: '../src/Controller'
-         tags: ['controller.service_arguments']
+     App\Bundle\AppBundle\Controller\:
+         resource: '../src/Bundle/AppBundle/Controller'
+         tags: ['controller.service_arguments']
+ 
+     App\Bundle\FooBundle\Controller\:
+         resource: '../src/Bundle/FooBundle/Controller'
+         tags: ['controller.service_arguments']
  
      #
      # Entity listeners
      #
  
-     App\EntityListener\:
-         resource: '../src/EntityListener'
-         tags: ['doctrine.orm.entity_listener']
+     App\Bundle\AppBundle\EntityListener\:
+         resource: '../src/Bundle/AppBundle/EntityListener'
+         tags: ['doctrine.orm.entity_listener']
+ 
+     App\Bundle\FooBundle\EntityListener\:
+         resource: '../src/Bundle/FooBundle/EntityListener'
+         tags: ['doctrine.orm.entity_listener']
  
      #
      # Twig extensions
      #
  
-     App\Twig\AppExtension:
-         tags: ['twig.extension']
+     App\Bundle\AppBundle\Twig\AppExtension:
+         tags: ['twig.extension']
```

# ã¾ã¨ã‚

ã ã„ãŸã„ã“ã‚“ãªæµã‚Œã§ãƒãƒ³ãƒ‰ãƒ«åˆ†å‰²ã§ãã‚‹ã¨æ€ã„ã¾ã™ğŸ‘

ãƒ™ãƒ¼ã‚¹ãŒã§ãã¦ã„ã‚Œã°ã€æ©Ÿèƒ½ã®å¡ŠãŒå¢—ãˆã‚‹ã¨ãã«ãƒãƒ³ãƒ‰ãƒ«ã‚’è¿½åŠ ã™ã‚‹ã®ã¯å®¹æ˜“ã§ã™ã­ã€‚

ã¨ã„ã†ã‚ã‘ã§ã€å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚
