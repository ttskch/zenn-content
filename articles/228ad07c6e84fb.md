---
title: "[Symfony] ãƒ•ã‚©ãƒ¼ãƒ ã®FileTypeã§multipleã‚’ä½¿ã£ã¦ã„ã‚‹ã¨ãã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®æ›¸ãæ–¹"
emoji: "ðŸŽ»"
type: "tech"
topics: ["php", "symfony"]
published: true
published_at: 2020-06-10
---

:::message
ã“ã®è¨˜äº‹ã¯ã€2020-06-10ã«åˆ¥ã®ãƒ–ãƒ­ã‚°åª’ä½“ã«æŠ•ç¨¿ã—ãŸè¨˜äº‹ã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã§ã™ã€‚
:::

å°ãƒã‚¿ã§ã™ã€‚

Symfonyã®ãƒ•ã‚©ãƒ¼ãƒ ã§ã€FileTypeã® [multiple](https://symfony.com/doc/current/reference/forms/types/file.html#multiple) ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æœ‰åŠ¹ã«ã—ã¦è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã¨ãã€

```php
$builder
    ->add('files', FileType::class, [
        'label' => 'æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«',
        'multiple' => true,
        'constraints' => [
            new Assert\File([
                'maxSize' => '2m',
            ])
        ],
    ])
;
```

ã“ã‚“ãªãµã†ã«ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¨­å®šã—ã¦ã—ã¾ã†ã¨ä¸Šæ‰‹ãã„ãã¾ã›ã‚“ã€‚ï¼ˆãƒ©ã‚¤ã‚¿ã‚¤ãƒ ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ï¼‰

æ­£ã—ãã¯ã€ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ã®é…åˆ—ã®å„è¦ç´ ã«å¯¾ã—ã¦ãã‚Œãžã‚Œå€‹åˆ¥ã«ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ã« [`All` åˆ¶ç´„](https://symfony.com/doc/current/reference/constraints/All.html) ã‚’ä½¿ã„ã¾ã™ã€‚

```php
$builder
    ->add('files', FileType::class, [
        'label' => 'æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«',
        'multiple' => true,
        'constraints' => [
            new Assert\All([
                new Assert\File([
                    'maxSize' => '2m',
                ])
            ]),
        ],
    ])
;
```

ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã®ã‚¢ãƒŽãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§æ›¸ããªã‚‰ã“ã†ã§ã™ã­ã€‚

```php
/**
 * @Assert\All({
 *     @Assert\File(maxSize="2m")
 * })
 */
private $files;
```

> å‚è€ƒ
>
> **php - Symfony validation on multiple file upload - Stack Overflow**  
> <https://stackoverflow.com/questions/46094219/symfony-validation-on-multiple-file-upload>

ã¡ãªã¿ã«ã€è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸéš›ã«ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒˆãƒ¼ã‚¿ãƒ«ã‚µã‚¤ã‚ºã§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹æ–¹æ³•ã¯æ¨™æº–ã§ã¯æä¾›ã•ã‚Œã¦ã„ãªã„ã®ã§ã€è‡ªåˆ†ã§ã‚«ã‚¹ã‚¿ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ›¸ãã—ã‹ãªã„ã‚ˆã†ã§ã™ã€‚

> å‚è€ƒ
> 
> **php - Symfony multiple Files total max size constraint - Stack Overflow**
> <https://stackoverflow.com/questions/45237363/symfony-multiple-files-total-max-size-constraint>
