---
title: "[Flutter] onPressedã®å‡¦ç†ä¸­ã¯æŠ¼ã›ãªããªã‚‹ã‚ˆã†ãªãƒœã‚¿ãƒ³ã‚’ä½œã‚‹"
emoji: "ğŸ’»"
type: "tech"
topics: ["flutter"]
published: true
published_at: 2020-08-13
---

:::message
ã“ã®è¨˜äº‹ã¯ã€2020-08-13ã«åˆ¥ã®ãƒ–ãƒ­ã‚°åª’ä½“ã«æŠ•ç¨¿ã—ãŸè¨˜äº‹ã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã§ã™ã€‚
:::

# ã‚„ã‚ŠãŸã„ã“ã¨

ä»¥ä¸‹ã®ã‚ˆã†ã«ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ä½•ã‚‰ã‹ã®å‡¦ç†ãŒè¡Œã‚ã‚Œã‚‹ã¨ã„ã†å®Ÿè£…ã‚’è€ƒãˆã¦ã¿ã¾ã™ã€‚

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1ghoy6mm8zzg30m813qkjw.gif)

ã“ã®ã‚µãƒ³ãƒ—ãƒ«ã®ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

```dart
import 'package:flutter/material.dart';

class Sample extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(),
      body: Builder(
        builder: (BuildContext context) => Center(
          child: RaisedButton(
            child: Text('é€ä¿¡'),
            onPressed: () async {
              await _someAsyncProcess();
              Scaffold.of(context).showSnackBar(SnackBar(
                content: Text('é€ä¿¡ã—ã¾ã—ãŸ'),
              ));
            },
          ),
        ),
      ),
    );
  }
}
```

> `Builder()` ã§å›²ã£ã¦ã„ã‚‹ç†ç”±ã«ã¤ã„ã¦ã¯
>
> [[Flutter] SnackBarã‚’ä½¿ãŠã†ã¨ã™ã‚‹ã¨ Scaffold.of() called withï¼ˆç•¥ï¼‰ã¨è¨€ã‚ã‚Œã‚‹ã¨ãã®å¯¾å¿œ](https://zenn.dev/ttskch/articles/5efbfe52d26157)
>
> ã“ã¡ã‚‰ã‚’ã”å‚ç…§ãã ã•ã„ã€‚

ã“ã®ã¾ã¾ã ã¨ã€ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸã¨ãã®å‡¦ç†ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹é–“ã‚‚ãƒœã‚¿ãƒ³ãŒæŠ¼ã›ã‚‹çŠ¶æ…‹ã«ãªã£ã¦ã„ã‚‹ãŸã‚ã€ **ãƒœã‚¿ãƒ³ã‚’é€£æ‰“ã™ã‚‹ã¨å‡¦ç†ãŒä¸¦è¡Œã—ã¦è¤‡æ•°å›å®Ÿè¡Œã•ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚**

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1ghoyd3xjf0g30m8140e26.gif)

ã“ã‚Œã¯è‰²ã€…ã¨å›°ã‚‹ã“ã¨ãŒã‚ã‚Šãã†ãªã®ã§ã€å‡¦ç†ä¸­ã¯ãƒœã‚¿ãƒ³ã‚’æŠ¼ã›ãªãã™ã‚‹ã‚ˆã†ãªå®Ÿè£…ã‚’ã—ãŸããªã‚Šã¾ã™ã€‚

# ã‚„ã‚Šæ–¹

ã¾ãšã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã›ãªãã™ã‚‹ã«ã¯ã€ `onPressed` ã« `null` ã‚’æ¸¡ã›ã°ã‚ˆã„ã§ã™ã€‚

```diff
- onPressed: () async {
-   await _someAsyncProcess();
-   Scaffold.of(context).showSnackBar(SnackBar(
-     content: Text('é€ä¿¡ã—ã¾ã—ãŸ'),
-   ));
- },
+ onPressed: null,
```

`onPressed` ãŒ `null` ã ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãƒœã‚¿ãƒ³ãŒã‚°ãƒ¬ãƒ¼ã‚¢ã‚¦ãƒˆã—ã¦æŠ¼ã›ãªããªã‚Šã¾ã™ã€‚

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1ghoyf942nhj30kq110aav.jpg)

> å‚è€ƒï¼š[dart - How do I disable a Button in Flutter? - Stack Overflow](https://stackoverflow.com/questions/49351648/how-do-i-disable-a-button-in-flutter#answer-51918174)

ãªã®ã§ã€ä»Šå›ã®ä¾‹ã§ã‚ã‚Œã° `RaisedButton` ã‚’ãƒ©ãƒƒãƒ—ã—ãŸ `StatefulWidget` ã‚’ä½œã£ã¦ã€å‡¦ç†ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹é–“ã®ã¿ `onPressed` ã‚’ `null` ã«åˆ‡ã‚Šæ›¿ãˆã‚‹ã¨ã„ã†å®Ÿè£…ã‚’ã—ã¦ã‚ã’ã‚Œã°ã‚ˆã•ãã†ã§ã™ã€‚

ã¨ã„ã†ã‚ã‘ã§ã€ãã®ã‚ˆã†ãªå®Ÿè£…ã‚’ `WaitableRaisedButton` ã¨ã—ã¦ä½œã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```dart
import 'package:flutter/material.dart';
import 'package:flutter/rendering.dart';

class WaitableRaisedButton extends StatefulWidget {
  @override
  createState() => _State();

  WaitableRaisedButton({
    @required this.onPressed,
    this.child,
  });

  final VoidCallback onPressed;
  final Widget child;
}

class _State extends State<WaitableRaisedButton> {
  bool _waiting = false;

  @override
  Widget build(BuildContext context) {
    return RaisedButton(
      onPressed: widget.onPressed == null || _waiting
          ? null
          : () async {
              setState(() => _waiting = true);
              await widget.onPressed();
              setState(() => _waiting = false);
            },
      child: widget.child,
    );
  }
}
```

ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚Šã¾ã—ãŸã€‚

`RaisedButton` ã®å¼•æ•°ã®ã†ã¡ã€ã¨ã‚Šã‚ãˆãšæ¯å›ä½¿ã† `onPressed` ã¨ `child` ã ã‘ã‚’ãƒ©ãƒƒãƒ—ã—ã¦ã„ã¾ã™ã€‚å¿…è¦ã«å¿œã˜ã¦ä»–ã®å¼•æ•°ã‚‚æ¸¡ã›ã‚‹ã‚ˆã†ã«ã—ã¦ã¿ã¦ãã ã•ã„ã€‚

`_waiting` ã¨ã„ã†çŠ¶æ…‹ã‚’æŒãŸã›ã¦ã€ `onPressed` ã®å‡¦ç†ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹é–“ã ã‘ `_waiting` ãŒ `true` ã«ãªã‚‹ã‚ˆã†ã«ã—ã€ `_waiting` ãŒ `true` ã®å ´åˆã¯ `onPressed` ã« `null` ãŒæ¸¡ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

ã‚ã¨ã¯ `RaisedButton` ã®ä»£ã‚ã‚Šã«ã“ã® `WaitableRaisedButton` ã‚’ä½¿ã†ã ã‘ã§ã™ğŸ‘

```diff
- child: RaisedButton(
+ child: WaitableRaisedButton(
```

ã“ã‚Œã§ã€é€£æ‰“ã§ããªã„ãƒœã‚¿ãƒ³ãŒä½œã‚Œã¾ã—ãŸğŸ™Œ

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1ghoyst8nsbg30m813yb29.gif)

# æœ¬æ ¼çš„ã«ä½¿ã†å ´åˆã¯ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æ´»ç”¨ã—ã¾ã—ã‚‡ã†

ã¡ãªã¿ã«ã€ [pub.dev](https://pub.dev/) ã‚’æ¤œç´¢ã—ã¦ã¿ã‚‹ã¨ç´ æ™´ã‚‰ã—ã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒè‰²ã€…é…å¸ƒã•ã‚Œã¦ã„ã¾ã™ã€‚

* [like_button | Flutter Package](https://pub.dev/packages/like_button)
* [argon_buttons_flutter | Flutter Package](https://pub.dev/packages/argon_buttons_flutter)
* [progress_state_button | Flutter Package](https://pub.dev/packages/progress_state_button)

ä»Šå›ã¯ç°¡å˜ãªã‚‚ã®ã‚’è‡ªå‰ã§ç”¨æ„ã™ã‚‹å ´åˆã®å®Ÿè£…ä¾‹ã‚’ç¤ºã—ã¾ã—ãŸãŒã€æœ¬æ ¼çš„ã«ä½¿ã†å ´åˆã¯ã“ã®è¾ºã‚Šã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æ´»ç”¨ã™ã‚‹ã®ãŒã‚ˆã„ã¨æ€ã„ã¾ã™âœ‹
