---
title: "Symfony Flex/Recipesã®ä»•çµ„ã¿ã‚’ãŠã•ã‚‰ã„ã—ã¦ã¿ã‚ˆã†"
emoji: "ğŸ»"
type: "tech"
topics: ["php", "symfony"]
published: true
published_at: 2020-04-11
---

:::message
ã“ã®è¨˜äº‹ã¯ã€2020-04-11ã«åˆ¥ã®ãƒ–ãƒ­ã‚°åª’ä½“ã«æŠ•ç¨¿ã—ãŸè¨˜äº‹ã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã§ã™ã€‚
:::

Symfony3ã‹ã‚‰å°å…¥ã•ã‚ŒãŸ [Symfony Flex/Recipes](https://flex.symfony.com/) ã§ã™ãŒã€æ„å¤–ã¨çš†ã•ã‚“ä»•çµ„ã¿ã‚’ç†è§£ã›ãšé©å½“ã«ä½¿ã£ã¦ã¾ã›ã‚“ã‹ï¼Ÿï¼ˆåƒ•ã¯é©å½“ã«ä½¿ã£ã¦ã¾ã—ãŸï¼‰

åˆ†ã‹ã£ã¦ã—ã¾ãˆã°ç°¡å˜ãªè©±ãªã®ã§ã€æ”¹ã‚ã¦ã¡ã‚‡ã£ã¨æ•´ç†ã—ã¦ãŠãã¾ã—ã‚‡ã†âœ‹

# Symfony Flexã¯Composerãƒ—ãƒ©ã‚°ã‚¤ãƒ³

[Symfony Flex](https://github.com/symfony/flex) ã¯ã€Symfonyã‚¢ãƒ—ãƒªã¸ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®è¿½åŠ ã«ä¼´ã†é›‘å¤šãªã‚¿ã‚¹ã‚¯ï¼ˆãƒãƒ³ãƒ‰ãƒ«ã®ç™»éŒ²ã‚„è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆãªã©ï¼‰ã‚’è‡ªå‹•åŒ–ã—ã¦ãã‚Œã‚‹ **Composerãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚**

`symfony/flex` ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ã€ãã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé…ä¸‹ã§ã¯ `composer install` ã‚„ `composer require` ã—ãŸã¨ãã®æŒ™å‹•ãŒSymfony Flexã«ã‚ˆã£ã¦æ‹¡å¼µã•ã‚Œã¾ã™ã€‚

ã¾ãŸã€ `composer` ã‚³ãƒãƒ³ãƒ‰ã«ä»¥ä¸‹ã®ã‚ˆã†ã«ã„ãã¤ã‹ã®ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚

```
Available commands:
 :
 :
 recipes
  recipes:install          Installs or reinstalls recipes for already installed packages.
 symfony
  symfony:dump-env         Compiles .env files to .env.local.php.
  symfony:generate-id      Generates a unique ID for this project.
  symfony:recipes          Shows information about all available recipes.
  symfony:recipes:install  Installs or reinstalls recipes for already installed packages.
  symfony:sync-recipes     Installs or reinstalls recipes for already installed packages.
  symfony:unpack           Unpacks a Symfony pack.
```

# Symfony Recipesã¯Symfony FlexãŒåˆ©ç”¨ã™ã‚‹è‡ªå‹•åŒ–ã®ãƒ¬ã‚·ãƒ”

Symfony FlexãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹Composerã§ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸéš›ã€[Symfony Recipesã®ãƒªãƒã‚¸ãƒˆãƒª](https://github.com/symfony/recipes) å†…ã«å¯¾å¿œã™ã‚‹ **ãƒ¬ã‚·ãƒ”** ãŒå­˜åœ¨ã—ã¦ã„ã‚Œã°ã€ãã®å†…å®¹ã«å¾“ã£ã¦è‰²ã€…ãªã‚¿ã‚¹ã‚¯ã‚’è‡ªå‹•ã§å®Ÿè¡Œã—ã¦ãã‚Œã¾ã™ã€‚ï¼ˆã“ã‚Œã‚’ã€Œãƒ¬ã‚·ãƒ”ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã€ã¨è¡¨ç¾ã—ã¾ã™ï¼‰

ä¾‹ãˆã°ã€[symfony/monolog-bundle](https://github.com/symfony/monolog-bundle) ã«å¯¾å¿œã™ã‚‹ãƒ¬ã‚·ãƒ”ã¯ [ã“ã®ã‚ˆã†ãªå†…å®¹](https://github.com/symfony/recipes/tree/2de05e19f916c8841102f2a35f0dc08dbac219ed/symfony/monolog-bundle/3.3) ã§ãƒªãƒã‚¸ãƒˆãƒªã«ç™»éŒ²ã•ã‚Œã¦ãŠã‚Šã€[manifest.json](https://github.com/symfony/recipes/blob/2de05e19f916c8841102f2a35f0dc08dbac219ed/symfony/monolog-bundle/3.3/manifest.json) ã‚’è¦‹ã‚‹ã¨ã€

* `bundles.php` ã« `"Symfony\\Bundle\\MonologBundle\\MonologBundle"` ã‚’ `["all"]` ã‚’å¯¾è±¡ã¨ã—ã¦è¿½åŠ ã™ã‚‹
* [config](https://github.com/symfony/recipes/tree/2de05e19f916c8841102f2a35f0dc08dbac219ed/symfony/monolog-bundle/3.3/config) ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸­èº«ã‚’Symfonyã® `%CONFIG_DIR%` ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹
* `symfony/monolog-bundle` ã¨ã„ã†æ­£å¼ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªåã§ã¯ãªã `log` `logger` `logging` `logs` `monolog` ã¨ã„ã£ãŸã‚¨ã‚¤ãƒªã‚¢ã‚¹ã§ã‚‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹

ã¨ã„ã†å®šç¾©ãŒæ›¸ã‹ã‚Œã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚

> Symfony Recipsã«å®šç¾©ã§ãã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®è©³ç´°ã«ã¤ã„ã¦ã¯ [å…¬å¼ã®README](https://github.com/symfony/recipes#options) ã‚’ã”å‚ç…§ãã ã•ã„ã€‚

ãªãŠã€ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’ä½¿ã£ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸå ´åˆã‚‚ã€å½“ç„¶ãªãŒã‚‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒªæœ¬ä½“ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯æ™®é€šã« [packagist.org](https://packagist.org/packages/symfony/monolog-bundle) ã‹ã‚‰è¡Œã‚ã‚Œã¾ã™ã—ã€ `composer.json` ã® `require` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã‚‚ã‚¨ã‚¤ãƒªã‚¢ã‚¹åã§ã¯ãªããƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ­£å¼åç§°ãŒè¨˜è¼‰ã•ã‚Œã¾ã™ã€‚

ã¡ãªã¿ã«ã€Symfony FlexãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹Composerã§ã¯ã€ `symfony/xxx` ã¨ã„ã†åå‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã™ã¹ã¦ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ `xxx` ã¨ãƒ™ãƒ³ãƒ€ãƒ¼åã‚’çœç•¥ã—ãŸåå‰ã‚’ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã¨ã—ã¦ä½¿ãˆã‚‹ã‚ˆã†ã§ã™ã€‚

`symfony/monolog-bundle` ã‚‚ã€ãƒ¬ã‚·ãƒ”ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã«ã¯ `monolog-bundle` ã¨ã„ã†åå‰ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€ `composer require monolog-bundle` ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

# `symfony.lock` ã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸãƒ¬ã‚·ãƒ”ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¨˜éŒ²ã—ã¦ãŠããƒ•ã‚¡ã‚¤ãƒ«

`symfony/flex` ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ä½œæˆã•ã‚Œã‚‹ `symfony.lock` ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸãƒ¬ã‚·ãƒ”ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãªã©ã‚’è¨˜éŒ²ã—ã¦ãŠããŸã‚ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚

ã“ã‚Œã¯Gitãªã©ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†é…ä¸‹ã«ç½®ãã¹ãã¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

> <https://symfony.com/doc/current/setup.html#installing-packages>
> *Flex keeps tracks of the recipes it installed in a symfony.lock file, which must be committed to your code repository.*

# ãƒ¬ã‚·ãƒ”ã¯ã‚ã¨ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ç›´ã™ã“ã¨ã‚‚ã§ãã‚‹

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ãƒ¬ã‚·ãƒ”ã®çŠ¶æ…‹ã¯ `symfony.lock` ã«è¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹ã‚ã‘ã§ã™ãŒã€ `composer resipes` ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†ã¨ã“ã‚Œã‚’ä¸€è¦§ã§ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```bash
$ composer recipes

 Available recipes.

 * doctrine/annotations
 * sensio/framework-extra-bundle
 * symfony/apache-pack
 * symfony/console (update available)
 * symfony/debug-bundle
 * symfony/flex
 * symfony/framework-bundle
 * symfony/maker-bundle
 * symfony/monolog-bundle
 * symfony/phpunit-bridge
 * symfony/routing
 * symfony/twig-bundle
 * symfony/validator (recipe not installed)
 * symfony/web-profiler-bundle
 * symfony/webpack-encore-bundle

Run:
 * composer recipes vendor/package to see details about a recipe.
 * composer recipes:install vendor/package --force -v to update that recipe.
```

å®Ÿéš›ã«ã‚ãªãŸã®ãŠæ‰‹å…ƒã®Symfonyãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ `composer recipes` ã‚’å®Ÿè¡Œã—ã¦ã¿ã¦ã»ã—ã„ã®ã§ã™ãŒã€ãŠãã‚‰ãä¸Šè¨˜ã®ã‚ˆã†ã«ã„ãã¤ã‹ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã« `(recipe not installed)` ã‚„ `(update available)` ã¨ã„ã£ãŸã‚³ãƒ¡ãƒ³ãƒˆãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚

èª­ã‚“ã§å­—ã®ã”ã¨ãã€

* `(recipe not installed)` ï¼šãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«å¯¾å¿œã™ã‚‹ãƒ¬ã‚·ãƒ”ãŒãƒªãƒã‚¸ãƒˆãƒªã«å­˜åœ¨ã™ã‚‹ã®ã«ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ãã‚ŒãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã„
* `(update available)` ï¼šã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã®ãƒ¬ã‚·ãƒ”ã‚ˆã‚Šã‚‚æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ãƒ¬ã‚·ãƒ”ãŒãƒªãƒã‚¸ãƒˆãƒªã«å­˜åœ¨ã™ã‚‹

ã¨ã„ã†æ„å‘³ã§ã™ã€‚

ç‰¹ã«ãƒ¬ã‚·ãƒ”çµŒç”±ã§è‡ªå‹•ã§ä½œæˆã•ã‚Œã‚‹ãƒãƒ³ãƒ‰ãƒ«ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®é››å½¢ãªã©ã¯ã€ãƒ¬ã‚·ãƒ”ã®æ›´æ–°å·®åˆ†ã‚’è‡ªåˆ†ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã‚‚é©ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã‚‚ã‚ã‚‹ã®ã§ã€ãŸã¾ã« `composer recipes` ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã¿ã‚‹ç¿’æ…£ã‚’æŒã¤ã¨ã„ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

`(recipe not installed)` ã‚„ `(update available)` ã®çŠ¶æ…‹ã«ãªã£ã¦ã„ã‚‹ãƒ¬ã‚·ãƒ”ã¯ã€ `composer recipes:install` ã‚³ãƒãƒ³ãƒ‰ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ç›´ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

ä¸Šè¨˜ã®ä¾‹ã§ã¯ `symfony/validator` ã®ãƒ¬ã‚·ãƒ”ãŒ `(recipe not installed)` ã ã£ãŸã®ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã™ã‚Œã°ãƒ¬ã‚·ãƒ”ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã ã‘ã‚’å˜ä½“ã§ã‚„ã‚Šç›´ã›ã¾ã™ã€‚

```bash
$ composer recipes:install symfony/validator
```

åŒã˜ãä¸Šè¨˜ã®ä¾‹ã§ `symfony/console` ã¯ `(update available)` ã§ã—ãŸãŒã€ã“ã®ã‚ˆã†ã«ã™ã§ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã®ãƒ¬ã‚·ãƒ”ã‚’å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å ´åˆã«ã¯ã€ `--force` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```bash
$ composer recipes:install symfony/console --force
```

æ³¨æ„ç‚¹ã¨ã—ã¦ã€å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸãƒ¬ã‚·ãƒ”ãŒãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•ç”Ÿæˆã—ã¦ãã‚Œã‚‹ã‚‚ã®ã ã£ãŸå ´åˆã€**æ—¢å­˜ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒé››å½¢ã§ä¸Šæ›¸ãã•ã‚Œã¦ã—ã¾ã†** ã®ã§ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã«æ‰‹å‹•ã§å·®åˆ†ã‚’ä¿®æ­£ã™ã‚‹ãªã‚Šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

# ã¾ã¨ã‚

* Symfony Flexã¯Composerãƒ—ãƒ©ã‚°ã‚¤ãƒ³
* Symfony Recipesã¯Symfony FlexãŒåˆ©ç”¨ã™ã‚‹è‡ªå‹•åŒ–ã®ãƒ¬ã‚·ãƒ”
* `symfony.lock` ã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸãƒ¬ã‚·ãƒ”ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¨˜éŒ²ã—ã¦ãŠããƒ•ã‚¡ã‚¤ãƒ«
* ãƒ¬ã‚·ãƒ”ã¯ã‚ã¨ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ç›´ã™ã“ã¨ã‚‚ã§ãã‚‹
