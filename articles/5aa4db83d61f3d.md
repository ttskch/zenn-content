---
title: "[Symfony/Form] å­FormTypeã®ç‰¹å®šã®é …ç›®ã‚’ãã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã§ã®ã¿å¿…é ˆã«ã™ã‚‹æ–¹æ³•"
emoji: "ğŸ»"
type: "tech"
topics: ["php", "symfony"]
published: true
published_at: 2020-12-06
---

:::message
ã“ã®è¨˜äº‹ã¯ã€2020-12-06ã«åˆ¥ã®ãƒ–ãƒ­ã‚°åª’ä½“ã«æŠ•ç¨¿ã—ãŸè¨˜äº‹ã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã§ã™ã€‚
:::

[Symfony Advent Calendar 2020](https://qiita.com/advent-calendar/2020/symfony) ã®6æ—¥ç›®ã®è¨˜äº‹ã§ã™ï¼ğŸ„ğŸŒ™å°ãƒã‚¿ã§ã™ã¿ã¾ã›ã‚“ï¼

æ˜¨æ—¥ã‚‚åƒ•ã®è¨˜äº‹ã§ã€[[Symfony] ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã«ãŠã„ã¦å­ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå´ã®NotBlankåˆ¶ç´„ãŒç„¡è¦–ã•ã‚Œã‚‹ã‚±ãƒ¼ã‚¹ã«ã¤ã„ã¦](https://zenn.dev/ttskch/articles/c596276f0d50d3) ã§ã—ãŸâœ¨

ã¡ãªã¿ã«ã€åƒ•ã¯ã‚ˆã [Twitterã«ã‚‚Symfonyãƒã‚¿ã‚’å‘Ÿã„ã¦ã„ã‚‹](https://twitter.com/search?q=from%3Attskch%20(symfony%20OR%20doctrine)&src=typed_query&f=live) ã®ã§ã€ã‚ˆã‚ã—ã‘ã‚Œã°ãœã² [ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ã‚„ã£ã¦ãã ã•ã„ğŸ•ŠğŸ¤²](https://twitter.com/ttskch)

> ã‚ã¨ã€ã“ã®è¨˜äº‹ã¨ã‚ˆãä¼¼ãŸå†…å®¹ã®ä»¥ä¸‹ã®ã‚ˆã†ãªè¨˜äº‹ã‚‚ã‚ã‚‹ã®ã§ã€ã‚ˆã‚ã—ã‘ã‚Œã°ã‚ã‚ã›ã¦ã”å‚ç…§ãã ã•ã„ğŸ¤²
> [[Symfony/Form] ç¶™æ‰¿å…ƒã®FromTypeã®é …ç›®ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’éƒ¨åˆ†çš„ã«å¤‰æ›´ã™ã‚‹æ–¹æ³•](https://zenn.dev/ttskch/articles/cd754b537f10b9)

# ã‚„ã‚ŠãŸã„ã“ã¨

ä¾‹ãˆã°ã€ã‚¢ãƒ—ãƒªå†…ã«ä½æ‰€ã‚’å…¥åŠ›ã™ã‚‹ç”»é¢ãŒã„ãã¤ã‹ã‚ã£ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ã« `AddressType` ã¨ã„ã†ä½æ‰€å…¥åŠ›ç”¨ã®FormTypeã‚’éƒ¨å“åŒ–ã—ã¦ã„ã‚‹ã¨ã—ã¾ã™ã€‚

```php
class AddressType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('zipCode', TextType::class, [
                'required' => false,
                'label' => 'éƒµä¾¿ç•ªå·',
            ])
            ->add('prefecture', TextType::class, [
                'required' => false,
                'label' => 'éƒ½é“åºœçœŒ',
            ])
            ->add('city', TextType::class, [
                'required' => false,
                'label' => 'å¸‚åŒºéƒ¡',
            ])
            ->add('line1', TextType::class, [
                'required' => false,
                'label' => 'ç”ºåãƒ»ç•ªåœ°',
            ])
            ->add('line2', TextType::class, [
                'required' => false,
                'label' => 'å»ºç‰©åãƒ»å·å®¤',
            ])
        ;
    }
}
```

åŸºæœ¬çš„ã«ã¯ã©ã®é …ç›®ã‚‚å¿…é ˆã§ãªã„ã®ã§ã™ãŒã€**ã¨ã‚ã‚‹ç”»é¢ã«ãŠã„ã¦ã®ã¿ã€éƒ½é“åºœçœŒã ã‘ã¯å¿…é ˆã«ã—ãŸã„** ã¨ã„ã†è¦ä»¶ãŒå‡ºã¦ããŸã¨ã—ã¾ã—ã‚‡ã†ã€‚

ã“ã†ã„ã†å ´åˆã®å¯¾å‡¦æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚

# ã‚„ã‚Šæ–¹

ã‚„ã‚Šæ–¹ã¯ã™ã”ãç°¡å˜ã§ã€ã“ã® `AddressType` ã‚’ä½¿ã£ã¦ã„ã‚‹FormTypeå´ã§ã€

1. `$builder->get('address')->get('prefecture')->getOptions()` ã§ `prefecture` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å–å¾—
1. ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®å†…å®¹ã‚’éƒ¨åˆ†çš„ã«å¤‰æ›´
1. `$builder->add()` ã—ç›´ã™

ã ã‘ã§ã™ğŸ‘

```php
class FooType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('hoge', TextType::class, [
                'label' => 'ã»ã’',
            ])
            ->add('fuga', TextType::class, [
                'label' => 'ãµãŒ',
            ])
            ->add('address', AddressType::class, [
                'label' => 'ä½æ‰€',
            ])
        ;

        // æ—¢å­˜é …ç›®ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’éƒ¨åˆ†çš„ã«å¤‰æ›´ã—ã¦addã—ç›´ã™
        $fieldOptions = $builder->get('address')->get('prefecture')->getOptions();
        $fieldOptions['required'] = true;
        $fieldOptions['constraints'] = [
            new Assert\NotBlank(),
        ];
        $builder->get('address')->add('prefecture', TextType::class, $fieldOptions);
    }
}
```

ç°¡å˜ã§ã™ã­ï¼

> [[Symfony/Form] ç¶™æ‰¿å…ƒã®FromTypeã®é …ç›®ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’éƒ¨åˆ†çš„ã«å¤‰æ›´ã™ã‚‹æ–¹æ³•](https://zenn.dev/ttskch/articles/cd754b537f10b9)

ã“ã¡ã‚‰ã®éå»è¨˜äº‹ã§ç¶™æ‰¿å…ƒã®é …ç›®ã‚’ã„ã˜ã£ãŸã¨ãã¨ã‚„ã£ã¦ã„ã‚‹ã“ã¨ã¯ã¾ã£ãŸãåŒã˜ã§ã™ğŸ‘Œ

å ´åˆã«ã‚ˆã£ã¦ã¯ã€

```php
$fieldOptions['required'] = true;
```

ã ã‘ã§ãªã

```php
$fieldOptions['attr']['required'] = true;
$fieldOptions['label_attr']['class'] = 'required';
// ã¾ãŸã¯
// $fieldOptions['label_attr']['class'] .= ' required';
```

ãªã©ãŒå¿…è¦ãªã“ã¨ã‚‚ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ãã®ç†ç”±ã«ã¤ã„ã¦ã¯â†“æ˜¨æ—¥ã®è¨˜äº‹ã‚’ã”å‚ç…§ãã ã•ã„âœ‹

> [[Symfony] ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã«ãŠã„ã¦å­ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå´ã®NotBlankåˆ¶ç´„ãŒç„¡è¦–ã•ã‚Œã‚‹ã‚±ãƒ¼ã‚¹ã«ã¤ã„ã¦](https://zenn.dev/ttskch/articles/c596276f0d50d3) 

ä»¥ä¸Šã§ã™ï¼

[Symfony Advent Calendar 2020](https://qiita.com/advent-calendar/2020/symfony)ã€æ˜æ—¥ã¯ã¾ãŸåƒ•ã§ã™ï¼ç¬‘ ãŠæ¥½ã—ã¿ã«ï¼
