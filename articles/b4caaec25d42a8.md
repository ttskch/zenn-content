---
title: "MongoDB Atlasã®ç„¡æ–™ã‚¯ãƒ©ã‚¹ã‚¿ã§MongoDBã‚µãƒ¼ãƒãƒ¼ã‚’ä½¿ã£ã¦ã¿ã‚‹"
emoji: "ğŸ’»"
type: "tech"
topics: ["mongodb"]
published: true
published_at: 2020-05-27
---

:::message
ã“ã®è¨˜äº‹ã¯ã€2020-05-27ã«åˆ¥ã®ãƒ–ãƒ­ã‚°åª’ä½“ã«æŠ•ç¨¿ã—ãŸè¨˜äº‹ã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã§ã™ã€‚
:::

# MongoDB Atlasã¨ã¯

[MongoDB Atlas](https://www.mongodb.com/cloud/atlas) ã¯ã€MongoDBç¤¾ãŒæä¾›ã—ã¦ã„ã‚‹MongoDBã®DBaaSã§ã™ã€‚

[æ–™é‡‘ãƒ—ãƒ©ãƒ³](https://www.mongodb.com/cloud/atlas/pricing) ãŒå¾“é‡åˆ¶ã§ãƒ‘ãƒƒã¨åˆ†ã‹ã‚Šã¥ã‚‰ã„ã§ã™ãŒã€ `M0` ã¨ã„ã†ç¨®é¡ã®ã‚¯ãƒ©ã‚¹ã‚¿ã‚’é¸æŠã™ã‚Œã°ç„¡æ–™ã§åˆ©ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

ä»¥ä¸‹ã€ç„¡æ–™ã§ä½¿ã„å§‹ã‚ã‚‹ã¾ã§ã®å…·ä½“çš„ãªæ‰‹é †ã‚’è§£èª¬ã—ã¦ã„ãã¾ã™âœ‹

# 1. ç„¡æ–™ã®ã‚¯ãƒ©ã‚¹ã‚¿ã‚’ä½œæˆã™ã‚‹

ã¾ãšã¯ [MongoDB Atlas](https://www.mongodb.com/cloud/atlas) ã®ã‚µã‚¤ãƒˆã® `Start free` ãƒœã‚¿ãƒ³ã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã‚’ã—ã¦ãã ã•ã„ã€‚

ãƒ­ã‚°ã‚¤ãƒ³ã§ããŸã‚‰ã€ã‚¯ãƒ©ã‚¹ã‚¿ä¸€è¦§ç”»é¢ã§ `Build a Cluster` ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦æœ€åˆã®ã‚¯ãƒ©ã‚¹ã‚¿ã‚’ä½œæˆã—ã¾ã™ã€‚

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1gf65qq2blsj315f0u0wo5.jpg)

ç„¡æ–™ã§ä½¿ã„å§‹ã‚ã‚‹å ´åˆã¯ã€ `Shared Clusters` ã® `Create a cluster` ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1gf65sgfxg8j315f0u04e9.jpg)

ã‚¯ãƒ©ã‚¦ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ã¨ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’é¸æŠã§ãã‚‹ã®ã§ã€ä¾‹ãˆã°AWSã®ã‚·ãƒ³ã‚¬ãƒãƒ¼ãƒ«ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’é¸ã‚“ã§ã¿ã¾ã™ã€‚

`Cluster Tier` ã§é¸æŠã§ãã‚‹ `M0 Sandbox` ãŒç„¡æ–™ã®ã‚¯ãƒ©ã‚¹ã‚¿ã§ã™ã€‚ï¼ˆ `M0` ã‚¯ãƒ©ã‚¹ã‚¿ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚ãŸã‚Š1ã¤ã ã‘ä½œæˆå¯èƒ½ã§ã™ï¼‰

`Cluster Name` ï¼ˆã‚¯ãƒ©ã‚¹ã‚¿åï¼‰ã¯å¾Œã‹ã‚‰å¤‰æ›´ãŒã§ããªã„ã®ã§æ³¨æ„ã—ã¦ãã ã•ã„ã€‚

`Create Cluster` ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã‚¯ãƒ©ã‚¹ã‚¿ã®ä½œæˆãŒå§‹ã¾ã‚Šã¾ã™ã€‚ï¼ˆ3åˆ†ãã‚‰ã„ã‹ã‹ã‚Šã¾ã™ï¼‰

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1gf65uy8b1xj30u00xawtv.jpg)

ç„¡äº‹ã€ã‚¯ãƒ©ã‚¹ã‚¿ãŒä½œæˆã•ã‚Œã¾ã—ãŸï¼

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1gf662gv9dnj31330u07wi.jpg)

# 2. DBãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œã‚‹

MongoDBã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã®DBãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã—ã¾ã™ã€‚

ã‚µã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã® `Database Access` ã‹ã‚‰DBãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ç”»é¢ã¸ç§»å‹•ã—ã¦ã€ `Add New Database User` ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1gf665brp6yj316j0u0n6s.jpg)

ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’é©åˆ‡ã«è¨­å®šã—ã¦ `Add User` ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1gf67boscxej30u014vjxx.jpg)

ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¢ãƒ©ãƒ¼ãƒˆãŒè¡¨ç¤ºã•ã‚Œã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®æ›´æ–°ãŒå§‹ã¾ã‚‹ã®ã§ã€å®Œäº†ã—ã¦ã‚¢ãƒ©ãƒ¼ãƒˆãŒæ¶ˆãˆã‚‹ã¾ã§1ã€œ2åˆ†å¾…ã¡ã¾ã™ã€‚

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1gf66alsh7yj31370u0n6r.jpg)

# 3. IPã‚¢ãƒ‰ãƒ¬ã‚¹ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆã‚’è¨­å®šã™ã‚‹

MongoDB Atlasã§ã¯IPã‚¢ãƒ‰ãƒ¬ã‚¹ã®ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆã§å¤–éƒ¨ãƒ›ã‚¹ãƒˆã‹ã‚‰ã®æ¥ç¶šã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã—ã¾ã™ã€‚

æœ€åˆã¯ãƒªã‚¹ãƒˆãŒç©ºã§ã©ã“ã‹ã‚‰ã‚‚æ¥ç¶šã§ããªã„çŠ¶æ…‹ã«ãªã£ã¦ã„ã‚‹ã®ã§ã€ã¾ãšã¯ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆã‚’ç™»éŒ²ã—ã¾ã—ã‚‡ã†ã€‚

ã‚µã‚¤ãƒ‰ãƒãƒ¼ã® `Network Access` ã§IPãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆä¸€è¦§ç”»é¢ã‚’é–‹ã„ã¦ã€ `Add IP Address` ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1gf66khhvqcj319j0u0gum.jpg)

ä»¥ä¸‹ã®ã‚ˆã†ãªç”»é¢ãŒé–‹ãã®ã§ã€è¨±å¯ã—ãŸã„IPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è¨˜å…¥ã—ã¦ `Confirm` ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

`ADD CURRENT IP ADDRESS` ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ç¾åœ¨ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’é–²è¦§ã—ã¦ã„ã‚‹ãƒ­ãƒ¼ã‚«ãƒ«ãƒã‚·ãƒ³ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ãŒå…¥åŠ›ã•ã‚Œã¾ã™ã€‚ä»Šå›ã¯å¾Œã»ã©ãƒ­ãƒ¼ã‚«ãƒ«ãƒã‚·ãƒ³ã‹ã‚‰CLIã§æ¥ç¶šç¢ºèªã‚’ã—ã¾ã™ã®ã§ã€ã“ã‚Œã‚’ç™»éŒ²ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚

> `ALLOW ACCESS FROM ANYWHERE` ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ `0.0.0.0/0` ãŒå…¥åŠ›ã•ã‚Œã¦ã©ã“ã‹ã‚‰ã§ã‚‚ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«è¨­å®šã§ãã¾ã™ãŒã€å®‰å…¨æ€§ã‚’è€ƒãˆã‚‹ãªã‚‰ã‚ã¾ã‚Šä½¿ã‚ãªã„ã»ã†ãŒã‚ˆã„ã§ã—ã‚‡ã†ã€‚

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1gf66oth69tj312k0niq5p.jpg)

ä¾‹ã«ã‚ˆã£ã¦ã€é’ã„ã‚¢ãƒ©ãƒ¼ãƒˆãŒæ¶ˆãˆã¦ `Status` ãŒ `Active` ã«å¤‰ã‚ã‚‹ã¾ã§å¾…ã¡ã¾ã™ã€‚ï¼ˆ1åˆ†ãã‚‰ã„ï¼‰

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1gf66q4a1g3j319j0u0wnw.jpg)

# 4. DBã¸ã®æ¥ç¶šæƒ…å ±ã‚’ç¢ºèªã™ã‚‹

å®Ÿéš›ã«åˆ©ç”¨ã™ã‚‹ã«ã‚ãŸã‚Šã€MongoDBã‚¯ãƒ©ã‚¹ã‚¿ã«æ¥ç¶šã™ã‚‹ãŸã‚ã®æƒ…å ±ã‚’ç¢ºèªã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚

ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ã‚¯ãƒ©ã‚¹ã‚¿ä¸€è¦§ã«æˆ»ã£ã¦ã€ã‚¯ãƒ©ã‚¹ã‚¿ã® `CONNECT` ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1gf66gxn91tj31370u0amk.jpg)

DBãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆã¨IPãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆã®è¨­å®šãŒæ¸ˆã‚“ã§ã„ã‚Œã°ã€ä»¥ä¸‹ã®ã‚ˆã†ãªç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

ä»Šå›ã¯CLIã§æ¥ç¶šç¢ºèªã‚’ã—ã‚ˆã†ã¨æ€ã„ã¾ã™ã®ã§ã€ `Connect with the mongo shell` ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1gf66swm8w2j30yh0u0tdc.jpg)

Macã‹ã‚‰æ¥ç¶šã—ã¦ã„ã‚‹å ´åˆã¯ä»¥ä¸‹ã®ã‚ˆã†ãªç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚

![](https://tva1.sinaimg.cn/large/007S8ZIlgy1gf66wi03r8j30u0113wkj.jpg)

Homebrewã§ `mongo` ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹æ–¹æ³•ã¨ã€ãã‚Œã‚’ä½¿ã£ã¦ã‚¯ãƒ©ã‚¹ã‚¿ã«æ¥ç¶šã™ã‚‹ãŸã‚ã®ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚

å®Ÿéš›ã«è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼

# 5. CLIã§æ¥ç¶šç¢ºèª

å…ˆã»ã©ã®ç”»é¢ã«è¡¨ç¤ºã•ã‚Œã¦ã„ãŸã¨ãŠã‚Šã€Macã®å ´åˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«Homebrewã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚

```bash
$ brew install mongodb/brew/mongodb-community-shell

# ã¾ãŸã¯
$ brew tap mongodb/brew
$ brew install mongodb-community
```

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ããŸã‚‰ã€å…ˆã»ã©ã®ç”»é¢ã«è¡¨ç¤ºã•ã‚Œã¦ã„ãŸãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦å®Ÿè¡Œã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```bash
$ mongo "mongodb+srv://{ã‚¯ãƒ©ã‚¹ã‚¿ã®ãƒ›ã‚¹ãƒˆå}.mongodb.net/test" --username {DBãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼å}
```

ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®å…¥åŠ›ã‚’æ±‚ã‚ã‚‰ã‚Œã‚‹ã®ã§ã€DBãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¾ã™ã€‚

```
MongoDB Enterprise {ã‚¯ãƒ©ã‚¹ã‚¿å-shard-0}:PRIMARY>
```

ã“ã‚“ãªæ„Ÿã˜ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒè¡¨ç¤ºã•ã‚ŒãŸã‚‰æ¥ç¶šæˆåŠŸã§ã™ï¼

## CLIã‹ã‚‰ã®æ¥ç¶šã§ã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯URLã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ä¸è¦

ã¡ãªã¿ã«ã€å…ˆã»ã©ã®ç”»é¢ã«

> You will be prompted for the password for the MongoDB user, {username}. When entering your password, make sure all special characters are URL encoded.

ã“ã‚“ãªè¡¨è¨˜ãŒã‚ã‚Šã¾ã—ãŸãŒã€å®Ÿéš›ã«ä½¿ã£ã¦ã¿ãŸã¨ã“ã‚ã€CLIã‹ã‚‰ã®æ¥ç¶šã®å ´åˆã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯URLã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ä¸è¦ãªã‚ˆã†ã§ã™ğŸ¤”ï¼ˆWebã‚¢ãƒ—ãƒªãªã©ã‹ã‚‰ `mongodb+srv://` ã§å§‹ã¾ã‚‹URIã‚’ä½¿ã£ã¦æ¥ç¶šã™ã‚‹å ´åˆã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼åãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¨ã‚‚ã«URLã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ãŒå¿…è¦ï¼‰

## MongoDBã®ä¸­èº«ã‚’ä¸€æ—¦å…¨å‰Šé™¤ã—ãŸã„ï¼ã¨ã„ã†ã¨ãã¯

CLIã§MongoDBã«æ¥ç¶šã—ãŸä¸Šã§

```bash
> db.dropDatabase();
```

ã‚’å®Ÿè¡Œã™ã‚Œã°DBã®ä¸­èº«ã‚’å…¨å‰Šé™¤ã§ãã¾ã™ã€‚ï¼ˆ[å‚è€ƒ](https://stackoverflow.com/questions/3366397/delete-everything-in-a-mongodb-database)ï¼‰

# å‚è€ƒãƒªãƒ³ã‚¯

MongoDB Atlasã‚’ä½¿ã„å§‹ã‚ã‚‹ (MongoDB as a Service) - Qiita  
<https://qiita.com/nacam403/items/08c18a8234c82e2b304e>
