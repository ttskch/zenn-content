---
title: "[Symfony/Form] ç¶™æ‰¿å…ƒã®FromTypeã®é …ç›®ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’éƒ¨åˆ†çš„ã«å¤‰æ›´ã™ã‚‹æ–¹æ³•"
emoji: "ğŸ»"
type: "tech"
topics: ["php", "symfony"]
published: true
published_at: 2020-12-03
---

:::message
ã“ã®è¨˜äº‹ã¯ã€2020-12-03ã«åˆ¥ã®ãƒ–ãƒ­ã‚°åª’ä½“ã«æŠ•ç¨¿ã—ãŸè¨˜äº‹ã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã§ã™ã€‚
:::

[Symfony Advent Calendar 2020](https://qiita.com/advent-calendar/2020/symfony) ã®3æ—¥ç›®ã®è¨˜äº‹ã§ã™ï¼ğŸ„ğŸŒ™å°ãƒã‚¿ã§ã™ã¿ã¾ã›ã‚“ï¼

æ˜¨æ—¥ã‚‚åƒ•ã®è¨˜äº‹ã§ã€[[Symfony][Doctrine] COUNT()ã‚„CONCAT()ã®çµæœã§ORDER BYã™ã‚‹æ–¹æ³•](https://blog.ttskch.com/symfony-doctrine-count-concat-orderby/) ã§ã—ãŸâœ¨

ã¡ãªã¿ã«ã€åƒ•ã¯ã‚ˆã [Twitterã«ã‚‚Symfonyãƒã‚¿ã‚’å‘Ÿã„ã¦ã„ã‚‹](https://twitter.com/search?q=from%3Attskch%20(symfony%20OR%20doctrine)&src=typed_query&f=live) ã®ã§ã€ã‚ˆã‚ã—ã‘ã‚Œã°ãœã² [ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ã‚„ã£ã¦ãã ã•ã„ğŸ•ŠğŸ¤²](https://twitter.com/ttskch)

> ã‚ã¨ã€ã“ã®è¨˜äº‹ã¨ã‚ˆãä¼¼ãŸå†…å®¹ã®ä»¥ä¸‹ã®ã‚ˆã†ãªè¨˜äº‹ã‚‚ã‚ã‚‹ã®ã§ã€ã‚ˆã‚ã—ã‘ã‚Œã°ã‚ã‚ã›ã¦ã”å‚ç…§ãã ã•ã„ğŸ¤²
> [[Symfony/Form] å­FormTypeã®ç‰¹å®šã®é …ç›®ã‚’ãã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã§ã®ã¿å¿…é ˆã«ã™ã‚‹æ–¹æ³• | blog.ttskch](https://blog.ttskch.com/symfony-form-modify-options-of-child-formtype/)

# ã‚„ã‚ŠãŸã„ã“ã¨

ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ã« `BaseType` ã‚’ç¶™æ‰¿ã—ã¦ `FooType` ã‚’ä½œã‚Šã€é …ç›®ã‚’1ã¤è¿½åŠ ã—ã¦ãã®é …ç›®ã« `autofocus` ã‚’ã¤ã‘ãŸã¨ã—ã¾ã™ã€‚

```php
class FooType extends BaseType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        parent::buildForm($builder, $options);

        $builder
            ->add('additionalField', TextType::class, [
                'label' => 'ã»ã’ã»ã’',
                'attr' => [
                    'autofocus' => true,
                ],
            ])
        ;
    }
}
```

ã“ã®ã¨ãã€ `BaseType` ãŒæŒã£ã¦ã„ã‚‹é …ç›®ã«ã™ã§ã« `autofocus` ãŒã¤ã„ã¦ã„ãŸã¨ã—ãŸã‚‰ã€å®Ÿéš›ã®æŒ™å‹•ã¨ã—ã¦ã¯ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã®å®Ÿè£…ä¾å­˜ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒï¼‰ã‚ã¨ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚ŒãŸã»ã†ã®é …ç›®ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãŒå½“ãŸã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

æ„å›³ã¨ã—ã¦ã¯ `additionalField` ãŒç¢ºå®Ÿã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã•ã‚Œã¦ã»ã—ã„ã®ã§ã€ `BaseType` å´ã®é …ç›®ã® `autofocus` ã‚’å¤–ã—ãŸã„ã§ã™ã‚ˆã­ã€‚

ã“ã†ã„ã†å ´åˆã®å¯¾å‡¦æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚

# ã‚„ã‚Šæ–¹

ã‚„ã‚Šæ–¹ã¯ã™ã”ãç°¡å˜ã§ã€

1. `$builder->get(ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å)->getOptions()` ã§å¤‰æ›´ã—ãŸã„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å–å¾—
1. ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®å†…å®¹ã‚’éƒ¨åˆ†çš„ã«å¤‰æ›´
1. `$builder->add()` ã—ç›´ã™

ã ã‘ã§ã™ğŸ‘

```php
class FooType extends BaseType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        parent::buildForm($builder, $options);

        $builder
            ->add('additionalField', TextType::class, [
                'label' => 'ã»ã’ã»ã’',
                'attr' => [
                    'autofocus' => true,
                ],
            ])
        ;

        // æ—¢å­˜é …ç›®ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’éƒ¨åˆ†çš„ã«å¤‰æ›´ã—ã¦addã—ç›´ã™
        $fieldOptions = $builder->get('existentField')->getOptions();
        $fieldOptions['attr']['autofocus'] = false;
        $builder->add('existentField', TextType::class, $fieldOptions);
    }
}
```

è¦ªã® `autofocus` ã‚’å¤–ã™ã¨ã„ã†ã‚±ãƒ¼ã‚¹ä»¥å¤–ã§ã‚‚è¦šãˆã¦ãŠãã¨å½¹ã«ç«‹ã¤ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

ä»¥ä¸Šã§ã™ï¼

[Symfony Advent Calendar 2020](https://qiita.com/advent-calendar/2020/symfony)ã€æ˜æ—¥ã¯ [@77web](https://twitter.com/77web) ã•ã‚“ã§ã™ï¼ãŠæ¥½ã—ã¿ã«ï¼
