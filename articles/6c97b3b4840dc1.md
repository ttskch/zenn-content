---
title: "Nuxt.js + Vuetifyã§ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã®ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ã‚’å®Ÿè£…ã™ã‚‹"
emoji: "ğŸ’»"
type: "tech"
topics: ["javascript", "vue", "nuxt", "vuetify"]
published: true
published_at: 2020-03-13
---

:::message
ã“ã®è¨˜äº‹ã¯ã€2020-03-13ã«åˆ¥ã®ãƒ–ãƒ­ã‚°åª’ä½“ã«æŠ•ç¨¿ã—ãŸè¨˜äº‹ã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã§ã™ã€‚
:::

Nuxt.js + Vuetifyã§ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã®ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ã‚’å®Ÿè£…ã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚

# ä½œã‚‹ã‚‚ã®

ã“ã®è¨˜äº‹ã§ã¯ã€ä»¥ä¸‹ã®æ¡ä»¶ã§ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ã‚’å®Ÿè£…ã—ã¾ã™ã€‚

* Nuxt.jsã® [ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½](https://ja.nuxtjs.org/guide/views/#%E3%83%AC%E3%82%A4%E3%82%A2%E3%82%A6%E3%83%88) ã‚’ä½¿ã†
* layoutå´ï¼ˆ `default.vue` ï¼‰ã«ã‚¹ãƒ”ãƒŠãƒ¼ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ç½®ã„ã¦ã€pageså´ï¼ˆ `index.vue` ï¼‰ã‹ã‚‰ãã‚Œã®è¡¨ç¤º/éè¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹
* ã‚¹ãƒ”ãƒŠãƒ¼ã®è¦‹ãŸç›®ã¯ã€ç”»é¢å…¨ä½“ã‚’åŠé€æ˜ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§è¦†ã£ã¦ã€ç”»é¢ã®ä¸­å¤®ã«ã‚¹ãƒ”ãƒŠãƒ¼ã‚’é…ç½®ã™ã‚‹

å®Ÿéš›ã«å‹•ã‹ã™ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªæ„Ÿã˜ã«ãªã‚Šã¾ã™ğŸ‘

![](https://tva1.sinaimg.cn/large/00831rSTgy1gcrzd5mn7hg30hc08074z.gif)

# 1. `v-progress-circular` ä½¿ã„ã¤ã¤CSSã‚’æ›¸ã

ã‚¹ãƒ”ãƒŠãƒ¼ã®è¡¨ç¤ºã«ã¯Vuetifyã® [`v-progress-circular`](https://vuetifyjs.com/en/components/progress-circular/) ã‚’ä½¿ã„ã¾ã™ã€‚ `indeterminate` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã‚‹ã“ã¨ã§ç„¡é™ã«å›è»¢ã—ç¶šã‘ã‚‹ã‚¹ãƒ”ãƒŠãƒ¼ã‚’å‡ºåŠ›ã§ãã¾ã™ã€‚

ä»Šå›ä½œã‚ã†ã¨ã—ã¦ã„ã‚‹ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ã¯ã¨ã¦ã‚‚ä¸€èˆ¬çš„ãªã‚‚ã®ãªã®ã§ã€ä½•ãªã‚‰ `v-progress-circular` ã«æ¨™æº–ã§ãã†ã„ã†è¦‹ãŸç›®ã®å‡ºåŠ›ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã‹ãªï¼Ÿã¨æ€ã£ãŸã®ã§ã™ãŒã€ã©ã†ã‚„ã‚‰ç„¡ã•ãã†ãªã®ã§è‡ªåŠ›ã§CSSã‚’æ›¸ãã“ã¨ã«ã—ã¾ã™ã€‚

> ã‚°ã‚°ã£ãŸã¨ã“ã‚ï¼ˆã¡ã‚‡ã£ã¨å¤ã„ã§ã™ãŒï¼‰[ã“ã®è¾º](https://github.com/vuetifyjs/vuetify/issues/2508) ãŒå‡ºã¦ãã¦ã€è‡ªåˆ†ã§CSSã‚’æ›¸ãã—ã‹ãªã•ãã†ãªæ„Ÿã˜ã§ã—ãŸã€‚

```html
<!-- layouts/default.vue -->
<template>
  <v-app>
      <div id="loading">
        <v-progress-circular indeterminate />
      </div>
    <v-content>
      <nuxt />
    </v-content>
  </v-app>
</template>

<style lang="scss">
  #loading {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100vh;
    z-index:9999;
    position: fixed;
    background-color: rgba(#000, 0.5);
  }
</style>
```

```html
<!-- pages/index.vue -->
<template>
  <v-container class="text-center my-12">
    <v-btn color="secondary">
      Submit
    </v-btn>
  </v-container>
</template>
```

ã“ã®æ™‚ç‚¹ã§ã€ã¨ã‚Šã‚ãˆãšã“ã‚“ãªç”»é¢ãŒã§ãã¾ã—ãŸğŸ‘

![](https://tva1.sinaimg.cn/large/00831rSTgy1gcrz78pyiyg30hc084aab.gif)

# 2. ã‚¹ãƒ”ãƒŠãƒ¼ã®è¡¨ç¤º/éè¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹

ã“ã‚Œã¯æ™®é€šã« [`v-if`](https://jp.vuejs.org/v2/guide/conditional.html) ã‚’ä½¿ãˆã°OKã§ã™ã€‚

```html
<!-- layouts/default.vue -->
<template>
  <v-app>
    <div v-if="loading" id="loading">
      <v-progress-circular indeterminate />
    </div>
    <v-content>
      <nuxt />
    </v-content>
  </v-app>
</template>

<script>
export default {
  data: () => ({
    loading: true
  })
}
</script>

<style lang="scss">
  /* ç•¥ */
</style>
```

ã‚ã¨ã¯ã“ã® `loading` ã®å€¤ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚Œã°å®Œæˆã§ããã†ã§ã™ã­ã€‚

# 3. pageså´ã‹ã‚‰layoutå´ã®çŠ¶æ…‹ã‚’å¤‰æ›´ã™ã‚‹

pageså´ã‹ã‚‰layoutå´ã®çŠ¶æ…‹ã‚’å¤‰æ›´ã™ã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªæ–¹æ³•ãŒãƒ‘ãƒƒã¨åˆ†ã‹ã‚‰ãšã‚°ã‚°ã£ãŸã®ã§ã™ãŒã€ã€Œç´ ç›´ã«Vuexã‚’ä½¿ã„ã¾ã—ã‚‡ã†ã€çš„ãªæƒ…å ±ãŒå¤šã„å°è±¡ã§ã—ãŸã€‚ï¼ˆ[å‚è€ƒ](https://stackoverflow.com/questions/57199709/how-to-share-variable-with-nuxt-js-from-layout-to-pages)ï¼‰

ãŸã ã€ä»Šå›ã¯ãã‚“ãªæœ¬æ ¼çš„ãªçŠ¶æ…‹ç®¡ç†ãŒã—ãŸã„ã‚ã‘ã§ã¯ãªã‹ã£ãŸã®ã§ã€ã‚‚ã†å°‘ã—ç²˜ã£ã¦ã‚°ã‚°ã£ã¦ã¿ãŸã¨ã“ã‚ã€[ã“ã¡ã‚‰ã®è¨˜äº‹](https://www.sukerou.com/2019/01/nuxtjs-eventbus.html) ãªã©ã§ç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹ **EventBusæ–¹å¼** ã‚’ä½¿ã†ã®ãŒæ‰‹ã£å–ã‚Šæ—©ãã†ã¨ã„ã†ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã—ãŸã€‚

> EventBusæ–¹å¼ã¨ã„ã†ã®ãŒå…¬å¼ãªå‘¼ã³åãªã®ã‹ã¯ã‚ˆãåˆ†ã‹ã‚Šã¾ã›ã‚“ã€‚[ã“ã®è¨˜äº‹](https://medium.com/vuejobs/create-a-global-event-bus-in-vue-js-838a5d9ab03a) ã‚ãŸã‚ŠãŒæå”±å…ƒã£ã½ã„ã§ã™ãŒã€è©³ç´°ã¯ä¸æ˜ã§ã™ğŸ˜…

å…·ä½“çš„ã«ã¯ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªVueã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã® [`$emit()` ã¨ `$on()`](https://jp.vuejs.org/v2/api/#%E3%82%A4%E3%83%B3%E3%82%B9%E3%82%BF%E3%83%B3%E3%82%B9%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89-%E3%82%A4%E3%83%99%E3%83%B3%E3%83%88) ã‚’é€šã—ã¦ã€ãƒ‡ãƒ¼ã‚¿ã®å—ã‘æ¸¡ã—ã‚’ã™ã‚‹ã¨ã„ã†ã‚‚ã®ã§ã™ã€‚

Nuxt.jsã®å ´åˆã¯ã€ `$nuxt` ã¨ã„ã†ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªVueã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å­˜åœ¨ã—ã¦ã„ã‚‹ã®ã§ã€ã“ã‚Œã‚’ä½¿ãˆã°ç°¡å˜ã«å®Ÿè£…ã§ãã¾ã™ã€‚

ã¤ã¾ã‚Šã€pageså´ã§ `this.$nuxt.$emit()` ã‚’ã€layoutå´ã§ `this.$nuxt.$on()` ã‚’ä½¿ã†ã“ã¨ã§ã€ã‚¤ãƒ™ãƒ³ãƒˆã‚’é€šã—ã¦ãƒ‡ãƒ¼ã‚¿ã®å—ã‘æ¸¡ã—ãŒã§ãã‚‹ã¨ã„ã†ã‚ã‘ã§ã™ğŸ‘

```html
<!-- layouts/default.vue -->
<template>
  <!-- ç•¥ -->
</template>

<script>
export default {
  data: () => ({
    loading: false
  }),
  created () {
    this.$nuxt.$on('toggleLoading', (loading) => {
      this.loading = loading
    })
  }
}
</script>

<style lang="scss">
  /* ç•¥ */
</style>
```

```html
<!-- pages/index.vue -->
<template>
  <v-container class="text-center my-12">
    <v-btn color="secondary" @click="submit">
      Submit
    </v-btn>
  </v-container>
</template>

<script>
export default {
  methods: {
    submit () {
      this.toggleLoading(true)
      setTimeout(() => {
        this.toggleLoading(false)
      }, 3000)
    },
    toggleLoading (loading) {
      this.$nuxt.$emit('toggleLoading', loading)
    }
  }
}
</script>
```

* layoutå´
    * [`created` ãƒ•ãƒƒã‚¯](https://jp.vuejs.org/v2/guide/instance.html#%E3%82%A4%E3%83%B3%E3%82%B9%E3%82%BF%E3%83%B3%E3%82%B9%E3%83%A9%E3%82%A4%E3%83%95%E3%82%B5%E3%82%A4%E3%82%AF%E3%83%AB%E3%83%95%E3%83%83%E3%82%AF) ã§ `this.$nuxt.on()` ã‚’ä½¿ã£ã¦ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã‚’å—ã‘å–ã‚‹ãŸã‚ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚Šã™ãªã‚’ç™»éŒ²
* pageså´
    * ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ãŠã‚ˆã³ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çµ‚äº†ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ `this.$nuxt.$emit()` ã‚’ä½¿ã£ã¦ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ï¼ˆè¡¨ç¤º/éè¡¨ç¤ºã®çœŸå½å€¤ï¼‰ã‚’é€ã‚‹

ã¨ã„ã†å®Ÿè£…ã«ãªã£ã¦ã„ã¾ã™ã€‚

![](https://tva1.sinaimg.cn/large/00831rSTgy1gcrzd5mn7hg30hc08074z.gif)

ã“ã‚Œã§ç„¡äº‹å®Œæˆã—ã¾ã—ãŸï¼ğŸ™Œ

# æœ€çµ‚çš„ãªã‚³ãƒ¼ãƒ‰

æ”¹ã‚ã¦ã€æœ€çµ‚çš„ãªã‚³ãƒ¼ãƒ‰ã‚’è¼‰ã›ã¦ãŠãã¾ã™âœ‹

```html
<!-- layouts/default.vue -->
<template>
  <v-app>
    <div v-if="loading" id="loading">
      <v-progress-circular indeterminate />
    </div>
    <v-content>
      <nuxt />
    </v-content>
  </v-app>
</template>

<script>
export default {
  data: () => ({
    loading: false
  }),
  created () {
    this.$nuxt.$on('toggleLoading', (loading) => {
      this.loading = loading
    })
  }
}
</script>

<style lang="scss">
  #loading {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100vh;
    z-index:9999;
    position: fixed;
    background-color: rgba(#000, 0.5);
  }
</style>
```

```html
<!-- pages/index.vue -->
<template>
  <v-container class="text-center my-12">
    <v-btn color="secondary" @click="submit">
      Submit
    </v-btn>
  </v-container>
</template>

<script>
export default {
  methods: {
    submit () {
      this.toggleLoading(true)
      setTimeout(() => {
        this.toggleLoading(false)
      }, 3000)
    },
    toggleLoading (loading) {
      this.$nuxt.$emit('toggleLoading', loading)
    }
  }
}
</script>
```

# ã¾ã¨ã‚

* Vuetifyã® `v-progress-circular` ã«CSSã‚’å°‘ã—æ›¸ãè¶³ã›ã°ã€ã„ã„æ„Ÿã˜ã®ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ã®è¡¨ç¾ãŒä½œã‚Œã‚‹
* Nuxt.jsã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½ã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã«ã€pageså´ã‹ã‚‰layoutå´ã®çŠ¶æ…‹ã‚’å¤‰æ›´ã™ã‚‹ï¼ˆãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ã®è¡¨ç¤º/éè¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ï¼‰ã«ã¯ã€ `this.$nuxt.$emit()` ã¨ `this.$nuxt.$on()` ã‚’ä½¿ã£ãŸEventBusæ–¹å¼ãŒä¾¿åˆ©
