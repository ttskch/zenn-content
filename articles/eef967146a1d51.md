---
title: "[Flutter] ç”»åƒURLã‹ã‚‰Fileã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚‹"
emoji: "ğŸ’»"
type: "tech"
topics: ["flutter"]
published: true
published_at: 2020-08-07
---

:::message
ã“ã®è¨˜äº‹ã¯ã€2020-08-07ã«åˆ¥ã®ãƒ–ãƒ­ã‚°åª’ä½“ã«æŠ•ç¨¿ã—ãŸè¨˜äº‹ã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã§ã™ã€‚
:::

# ã‚„ã‚ŠãŸã„ã“ã¨

ã‚ã¾ã‚Šãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ãƒªãƒ¢ãƒ¼ãƒˆã«ã‚ã‚‹ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã®URLã‹ã‚‰ `File` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å–å¾—ã—ãŸã„å ´åˆã®ã‚„ã‚Šæ–¹ã‚’è§£èª¬ã—ã¾ã™ã€‚

# ã‚„ã‚Šæ–¹

ã¾ãšã€ `File` ã‚¯ãƒ©ã‚¹ã« `.fromUri` ã¨ã„ã†ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãŒç”Ÿãˆã¦ã„ã‚‹ã®ã§ã€

```dart
final File file = File.fromUri(Uri.parse('https://via.placeholder.com/100'));
```

ã¨ã‹ã§è¡Œã‘ãã†ãªæ°—ãŒã—ã¦ã—ã¾ã†ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€ã“ã“ã§ã„ã† `Uri` ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ å†…ã§ã® `Uri` ãªã®ã§ã€HTTP(S)ã®URIã‚’æŒ‡å®šã—ã¦ã‚‚èª­ã¿è¾¼ã‚ãšã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚

ã¨ã„ã†ã‚ã‘ã§ã€[http](https://pub.dev/packages/http) ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å°å…¥ã—ã¦ã¾ãšç”»åƒã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

> å‚è€ƒï¼š[Flutter: Copy image file from url to firebase - Stack Overflow](https://stackoverflow.com/questions/46169583/flutter-copy-image-file-from-url-to-firebase#answer-46170530)

```yaml
dependencies:
  flutter:
    sdk: flutter
  # ...
  http: ^0.12.2
```

ã¨ã„ã†æ„Ÿã˜ã§ `http` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å°å…¥ã—ã¦ã€

```dart
import 'package:http/http.dart';

file.writeAsBytesSync((await get('https://via.placeholder.com/300')).bodyBytes);
```

ã§ `File` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒã‚¤ãƒˆåˆ—ã‚’æ›¸ãè¾¼ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚

> å‚è€ƒï¼š[flutter download an Image from url - Stack Overflow](https://stackoverflow.com/questions/52299112/flutter-download-an-image-from-url#answer-59356482)

ã—ã‹ã—ã€ã“ã‚Œã‚’ã‚„ã‚‹ãŸã‚ã«ã¯ä½•ã‹éƒ½åˆã®ã„ã„ç©ºã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ãã“ã§ä»Šå›ã¯ [file](https://pub.dev/packages/file) ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã£ã¦ã‚ªãƒ³ãƒ¡ãƒ¢ãƒªã«ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚

```yaml
dependencies:
  flutter:
    sdk: flutter
  # ...
  http: ^0.12.2
  file: ^5.2.1
```

```dart
import 'package:file/memory.dart';
import 'package:http/http.dart';

File file = MemoryFileSystem().file('tmp.file');
file.writeAsBytesSync((await get('https://via.placeholder.com/300')).bodyBytes);
```

> å‚è€ƒï¼š[flutter - How do I create a "fake" dart:io File from in-memory bytes? - Stack Overflow](https://stackoverflow.com/questions/47862236/how-do-i-create-a-fake-dartio-file-from-in-memory-bytes#answer-57579006)

# ã¾ã¨ã‚

ã¾ã¨ã‚ã‚‹ã¨ã€ãƒªãƒ¢ãƒ¼ãƒˆã«ã‚ã‚‹ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã®URLã‹ã‚‰ `File` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å–å¾—ã—ãŸã„å ´åˆã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚„ã‚Šæ–¹ã§å¯¾å¿œã§ãã¾ã™ã€‚

* [http](https://pub.dev/packages/http) ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ [file](https://pub.dev/packages/file) ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã§ã€URLã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿ã‚’ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã‚“ã§ `File` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ

```dart
import 'package:file/memory.dart';
import 'package:http/http.dart';

File file = MemoryFileSystem().file('tmp.file');
file.writeAsBytesSync((await get('https://via.placeholder.com/300')).bodyBytes);
```
