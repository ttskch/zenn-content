---
title: "[Symfony] @Templateã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ã‚ãªã„ã»ã†ãŒã„ã„ç†ç”±"
emoji: "ğŸ»"
type: "tech"
topics: ["php", "symfony"]
published: true
published_at: 2020-12-21
---

:::message
ã“ã®è¨˜äº‹ã¯ã€2020-12-21ã«åˆ¥ã®ãƒ–ãƒ­ã‚°åª’ä½“ã«æŠ•ç¨¿ã—ãŸè¨˜äº‹ã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã§ã™ã€‚
:::

# ã¯ã˜ã‚ã«

[Symfony Advent Calendar 2020](https://qiita.com/advent-calendar/2020/symfony) ã®21æ—¥ç›®ã®è¨˜äº‹ã§ã™ï¼ğŸ„ğŸŒ™

æ˜¨æ—¥ã¯ [@kaino5454](https://twitter.com/kaino5454) ã•ã‚“ã® [Symfony4ã§ãƒã‚±ãƒ¢ãƒ³ãŠã™ã™ã‚ãƒ‘ãƒ¼ãƒ†ã‚£ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹ã‚¢ãƒ—ãƒªã‚’ä½œã£ã¦ã¿ãŸ](https://qiita.com/kaino5454/items/ffbf2bb117d16cf04634) ã§ã—ãŸâœ¨

ã¡ãªã¿ã«ã€åƒ•ã¯ã‚ˆã [Twitterã«ã‚‚Symfonyãƒã‚¿ã‚’å‘Ÿã„ã¦ã„ã‚‹](https://twitter.com/search?q=from%3Attskch%20(symfony%20OR%20doctrine)&src=typed_query&f=live) ã®ã§ã€ã‚ˆã‚ã—ã‘ã‚Œã°ãœã² [ãƒ•ã‚©ãƒ­ãƒ¼ã—ã¦ã‚„ã£ã¦ãã ã•ã„ğŸ•ŠğŸ¤²](https://twitter.com/ttskch)

# `@Tempalte` ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã¯

`@Template` ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€ [SensioFrameworkExtraBundle](https://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/index.html) ãŒæä¾›ã—ã¦ã„ã‚‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®1ã¤ã§ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ¡ã‚½ãƒƒãƒ‰ã¨ãƒ“ãƒ¥ãƒ¼ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ç´ä»˜ã‘ã‚’è‡ªå‹•ã§åˆ¤å®šã—ã¦ãã‚Œã‚‹ã‚„ã¤ã§ã™ã€‚

```php
// Before

class FooController
{
    public function index()
    {
        return $this->render('foo/index.html.', [
            'var' => 'value',
        ]);
    }
}
```

```php
// After

/**
 * @Template()
 */
class FooController
{
    public function index()
    {
        return [
            'var' => 'value',
        ];
    }
}

// ã¾ãŸã¯

class FooController
{
    /**
     * @Template()
     */
    public function index()
    {
        return [
            'var' => 'value',
        ];
    }
}
```

# æ­£å¸¸ã«å‹•ã‹ãªã„ã‚±ãƒ¼ã‚¹ã«é­é‡

æ˜”ã‹ã‚‰ãšã£ã¨ä¾¿åˆ©ã«ä½¿ã£ã¦ã„ãŸã‚“ã§ã™ãŒã€æœ€è¿‘ã«ãªã£ã¦ã“ã‚“ãªä¸å¯è§£ãªå‡ºæ¥äº‹ã«é­é‡ã—ã¾ã—ãŸã€‚


https://twitter.com/ttskch/status/1337363519063248896


https://twitter.com/ttskch/status/1337367673273896966


https://twitter.com/ttskch/status/1337373726405357570

ãƒ„ã‚¤ãƒ¼ãƒˆã®ã¨ãŠã‚Šã§ã™ãŒã€ã©ã†ã‚‚

1. ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã«ãŠã„ã¦ `$client->disableReboot()` ã‚’ã™ã‚‹
2. ãã®çŠ¶æ…‹ã® `$client` ã§ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚’è¡Œã†
3. ã™ã‚‹ã¨ã€ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå…ˆã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ¡ã‚½ãƒƒãƒ‰ã«ãŠã„ã¦ `@Tempalte` ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ­£å¸¸ã«åŠ¹ã‹ãªã„
    * é–“é•ã£ãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã“ã†ã¨ã—ã¦ã€å¿…è¦ãªå¤‰æ•°ãŒæ¸¡ã£ã¦ãã¦ã„ãªã„ãŸã‚ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹
    * ãŸã ã—ã€ `@Template` ã‚’ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã‚¯ãƒ©ã‚¹ã«å¯¾ã—ã¦ã‚¢ãƒãƒ†ãƒ¼ãƒˆã—ã¦ã„ã‚‹å ´åˆã«ã¯ä¸Šè¨˜ã®ç•°å¸¸å‹•ä½œã«ãªã‚‹ã‘ã©ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ¡ã‚½ãƒƒãƒ‰ã«å¯¾ã—ã¦ã‚ã®ãƒ†ãƒ¼ã¨ã—ã¦ã„ã‚Œã°æ­£å¸¸ã«å‹•ä½œã™ã‚‹

ã¨ã„ã†æŒ™å‹•ã®ã‚ˆã†ã§ã—ãŸã€‚è¬ã™ãã‚‹ã¨ã„ã†ã‹ã€ãŠãã‚‰ããƒã‚°ã§ã—ã‚‡ã†ã€‚

> ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã«ãŠã‘ã‚‹ `$client->disableReboot()` ã®æ„å‘³ã¯ä»¥ä¸‹ã®éå»è¨˜äº‹ã‚’ã”å‚ç…§ãã ã•ã„ã€‚
> 
> [[Symfony] æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆã§ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã«æ³¨å…¥ã—ã¦ã„ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã‚’ãƒ¢ãƒƒã‚¯ã™ã‚‹æ–¹æ³• | blog.ttskch](https://blog.ttskch.com/symfony-how-to-mock-service-on-functional-test/#%E6%B3%A8%E6%84%8F%E7%82%B9%EF%BC%9A%E4%B8%80%E5%BA%A6%E7%94%BB%E9%9D%A2%E3%82%92request%E3%81%97%E3%81%A6%E3%81%9D%E3%81%AE%E7%94%BB%E9%9D%A2%E3%81%AE%E3%83%95%E3%82%A9%E3%83%BC%E3%83%A0%E3%82%92%E9%80%81%E4%BF%A1%E3%81%99%E3%82%8B%E9%9A%9B%E3%81%AB%E3%83%A2%E3%83%83%E3%82%AF%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BB%E3%81%97%E3%81%84%E5%A0%B4%E5%90%88%E3%81%AF-client-disablereboot-%E3%81%8C%E5%BF%85%E8%A6%81)

# `@Template` ã¯ã»ã¼éæ¨å¥¨

å®Ÿã¯ã€[The Symfony Framework Best Practices (Symfony Best Practices)](https://symfony.com/doc/current/best_practices.html) ã«ãŠã„ã¦ã‚‚ã€ä»¥ä¸‹ã®ã‚ˆã†ã« [ã€Œ `@Template` ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¯ä½¿ã†ã¹ãã§ãªã„ã€ã¨æ˜è¨€ã•ã‚Œã¦ã„ã¾ã™](https://symfony.com/doc/current/best_practices.html#don-t-use-annotations-to-configure-the-controller-template)ã€‚

> The `@Template` annotation is useful, but also involves some magic. Moreover, most of the time `@Template` is used without any parameters, which makes it more difficult to know which template is being rendered. It also hides the fact that a controller should always return a `Response` object.

ã¾ãŸã€[Fabienæ°ã®ã“ã®ä¸€è¨€](https://github.com/symfony/symfony-docs/pull/12387#discussion_r329551967) ã‚’ç™ºç«¯ã¨ã—ã¦ã€[æ­£å¼ã«deprecatedã«ã—ã‚ˆã†ã‹ã¨ã„ã†issue](https://github.com/sensiolabs/SensioFrameworkExtraBundle/issues/641) ã‚‚èµ·ç¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

ã„ã¡ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã—ã¦ã‚‚ã€ `@Template` ã‚’ä½¿ã‚ãªã„ã“ã¨ã«ã‚ˆã£ã¦å¢—ãˆã‚‹æ‰‹é–“ã¨è¨€ã£ãŸã‚‰ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ¡ã‚½ãƒƒãƒ‰ã®ã‚¿ã‚¤ãƒ—é‡ãŒã¡ã‚‡ã“ã£ã¨å¢—ãˆã‚‹ãã‚‰ã„ã§ã™ã—ã€ã‚‚ã¯ã‚„ `@Template` ã¯ä½¿ã‚ãªã„ã»ã†ãŒã‚ˆã•ãã†ãªæ„Ÿã˜ã§ã™ã­ã€‚

# ãŠã‚ã‚Šã«

ã¨ã„ã†ã‚ã‘ã§ã€ `@Template` ã‚’ä½¿ã†ã®ã¯ã‚„ã‚ã¨ãã¾ã—ã‚‡ã†ã¨ã„ã†ãŠè©±ã§ã—ãŸã€‚

[Symfony Advent Calendar 2020](https://qiita.com/advent-calendar/2020/symfony)ã€æ˜æ—¥ã¯ [@polidog](https://twitter.com/polidog) ã•ã‚“ã§ã™ï¼ãŠæ¥½ã—ã¿ã«ï¼
