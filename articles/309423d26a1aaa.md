---
title: "ç„¡æ–™ã§å•†ç”¨ã«ã‚‚ä½¿ãˆã‚‹æ—¥æœ¬ã®éƒµä¾¿ç•ªå·APIã‚’ãƒªãƒªãƒ¼ã‚¹ã—ã¾ã—ãŸ"
emoji: "ğŸ’Œ"
type: "tech"
topics: ["api", "php", "symfony"]
published: true
---

# jp-postal-code-api

<https://github.com/ttskch/jp-postal-code-api>

[![](https://img.esa.io/uploads/production/attachments/15064/2024/05/28/77821/0fd9da6b-5cd2-44bb-9965-f68f9ce8a873.png)](https://github.com/ttskch/jp-postal-code-api)


æ—¥æœ¬ã®éƒµä¾¿ç•ªå·ã‹ã‚‰ä½æ‰€ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã‚‹Web APIã§ã™ã€‚

**GitHub Pagesã‚’ä½¿ç”¨ã—ã¦é™çš„ãªJSONãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦é…ä¿¡ã—ã¦ã„ã‚‹** ãŸã‚ã€å¯ç”¨æ€§ãŒé«˜ã„ã®ãŒç‰¹å¾´ã§ã™ã€‚ã¾ãŸã€**ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãªã®ã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ¯ãƒ¼ã‚¯ã§ã‚‚å®‰å¿ƒã—ã¦ã”ä½¿ç”¨ã„ãŸã ã‘ã¾ã™**ã€‚ã‚‚ã—æ°¸ç¶šæ€§ãŒå¿ƒé…ãªå ´åˆã¯ã”è‡ªç”±ã«ãƒ•ã‚©ãƒ¼ã‚¯ã—ã¦ã”åˆ©ç”¨ãã ã•ã„ã€‚

[æ—¥æœ¬éƒµä¾¿ã«ã‚ˆã£ã¦å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿](https://www.post.japanpost.jp/zipcode/download.html) ã‚’å…ƒã«ä½æ‰€ãƒ‡ãƒ¼ã‚¿ã®JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¦é…ä¿¡ã—ã¦ã„ã¾ã™ã€‚JSONãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯æ—¥æœ¬èªè¡¨è¨˜ã¨è‹±èªè¡¨è¨˜ã®ä½æ‰€ãƒ‡ãƒ¼ã‚¿ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚ãŸã ã—ã€å¤§å£äº‹æ¥­æ‰€å€‹åˆ¥ç•ªå·ã¯è‹±èªè¡¨è¨˜ã«ã¯å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚

ãªãŠã€é…ä¿¡ãƒ‡ãƒ¼ã‚¿ã¯GitHub Actionsã‚’ä½¿ç”¨ã—ã¦ [æ¯æ—¥æœ€æ–°ã®å†…å®¹ã«æ›´æ–°ã—ã¦ã„ã¾ã™](https://github.com/ttskch/jp-postal-code-api/actions/workflows/cron.yaml?query=branch:main)ã€‚

> ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å®Ÿè£…ã¯ [madefor/postal-code-api](https://github.com/madefor/postal-code-api) ã«ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å—ã‘ã¦ã„ã¾ã™ã€‚é•·æœŸé–“ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãŒè¡Œã‚ã‚Œã¦ã„ãªã„åŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ä»£ã‚ã‚‹ã‚‚ã®ã¨ã—ã¦ã€ãƒ¢ãƒ€ãƒ³PHPã§å†å®Ÿè£…ã—ã¾ã—ãŸã€‚ã‚ªãƒªã‚¸ãƒŠãƒ«ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«æœ€å¤§ã®æ•¬æ„ã‚’è¡¨ã—ã¾ã™ã€‚

# ä½¿ã„æ–¹

```
https://jp-postal-code-api.ttskch.com/api/{éƒµä¾¿ç•ªå·}.json
```

ã¨ã„ã†ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«GETãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã‚‹ã¨ã€ä½æ‰€ã®ãƒ‡ãƒ¼ã‚¿ãŒJSONå½¢å¼ã§å–å¾—ã§ãã¾ã™ã€‚

ä¾‹ãˆã°ã€éƒµä¾¿ç•ªå·ãŒ `100-0014` ã®ä½æ‰€ï¼ˆæ±äº¬éƒ½åƒä»£ç”°åŒºæ°¸ç”°ç”ºï¼‰ã‚’å–å¾—ã—ãŸã„å ´åˆã¯ã€ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®URLã¨ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å†…å®¹ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

<https://jp-postal-code-api.ttskch.com/api/1000014.json>

```json
{
    "postalCode": "1000014",
    "addresses": [
        {
            "prefectureCode": "13",
            "ja": {
                "prefecture": "æ±äº¬éƒ½",
                "address1": "åƒä»£ç”°åŒº",
                "address2": "æ°¸ç”°ç”º",
                "address3": "",
                "address4": ""
            },
            "en": {
                "prefecture": "Tokyo",
                "address1": "Chiyoda-ku",
                "address2": "Nagatacho ",
                "address3": "",
                "address4": ""
            }
        }
    ]
}
```

1ã¤ã®éƒµä¾¿ç•ªå·ã«è¤‡æ•°ã®ä½æ‰€ãŒã‚ã‚‹å ´åˆã¯ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å†…å®¹ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

<https://jp-postal-code-api.ttskch.com/api/6180000.json>

```json
{
    "postalCode": "6180000",
    "addresses": [
        {
            "prefectureCode": "26",
            "ja": {
                "prefecture": "äº¬éƒ½åºœ",
                "address1": "ä¹™è¨“éƒ¡å¤§å±±å´ç”º",
                "address2": "",
                "address3": "",
                "address4": ""
            },
            "en": {
                "prefecture": "Kyoto",
                "address1": "Oyamazaki-cho, Otokuni-gun",
                "address2": "",
                "address3": "",
                "address4": ""
            }
        },
        {
            "prefectureCode": "27",
            "ja": {
                "prefecture": "å¤§é˜ªåºœ",
                "address1": "ä¸‰å³¶éƒ¡å³¶æœ¬ç”º",
                "address2": "",
                "address3": "",
                "address4": ""
            },
            "en": {
                "prefecture": "Osaka",
                "address1": "Shimamoto-cho, Mishima-gun",
                "address2": "",
                "address3": "",
                "address4": ""
            }
        }
    ]
}
```

å¤§å£äº‹æ¥­æ‰€å€‹åˆ¥ç•ªå·ã§ã¯è‹±èªè¡¨è¨˜ã®ä½æ‰€ã¯ç©ºã«ãªã‚Šã¾ã™ã€‚

<https://jp-postal-code-api.ttskch.com/api/1008111.json>

```json
{
    "postalCode": "1008111",
    "addresses": [
        {
            "prefectureCode": "13",
            "ja": {
                "prefecture": "æ±äº¬éƒ½",
                "address1": "åƒä»£ç”°åŒº",
                "address2": "åƒä»£ç”°",
                "address3": "ï¼‘âˆ’ï¼‘",
                "address4": "å®®å†…åº"
            },
            "en": {
                "prefecture": "",
                "address1": "",
                "address2": "",
                "address3": "",
                "address4": ""
            }
        }
    ]
}
```

# é…ä¿¡ãƒ‡ãƒ¼ã‚¿ã®ç”Ÿæˆãƒ»è‡ªå‹•æ›´æ–°ã®ä»•çµ„ã¿

## é…ä¿¡ãƒ‡ãƒ¼ã‚¿ã®ç”Ÿæˆ

1. [æ—¥æœ¬éƒµä¾¿ã®Webã‚µã‚¤ãƒˆ](https://www.post.japanpost.jp/zipcode/download.html) ã‹ã‚‰ [ä½æ‰€ã®éƒµä¾¿ç•ªå·](https://www.post.japanpost.jp/zipcode/dl/roman-zip.html) ã¨ [äº‹æ¥­æ‰€ã®å€‹åˆ¥éƒµä¾¿ç•ªå·](https://www.post.japanpost.jp/zipcode/dl/jigyosyo/index-zip.html) ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
2. ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸZipãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’å–å¾—
3. CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã€é…ä¿¡ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ã®JSONãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ã‚’ `/docs/api/` é…ä¸‹ã«ç”Ÿæˆ

ã¨ã„ã†å‡¦ç†ã‚’PHPã§è¡Œã£ã¦ã„ã¾ã™ã€‚

[symfony/console](https://symfony.com/doc/current/components/console.html) ã§ [CLIã‚³ãƒãƒ³ãƒ‰ã¨ã—ã¦å®Ÿè£…ã—ã¦ã‚ã‚Š](https://github.com/ttskch/jp-postal-code-api/blob/477735ab7f169e573f920af0b2aadb945ec1f0c4/src/Command/BuildCommand.php)ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ `bin/console build` ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ä¸€é€£ã®å‡¦ç†ã‚’é–‹å§‹ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## GitHub Pagesã®è‡ªå‹•æ›´æ–°

https://github.com/ttskch/jp-postal-code-api/blob/477735ab7f169e573f920af0b2aadb945ec1f0c4/.github/workflows/cron.yaml#L8-L58

ä¸Šè¨˜ã®ã‚ˆã†ã«ã€GitHub Actionsã®Scheduled Workflowã‚’ä½¿ã£ã¦ [æ¯æ—¥åˆå‰0æ™‚é ƒã«è‡ªå‹•çš„ã«](https://github.com/ttskch/jp-postal-code-api/actions/workflows/cron.yaml?query=branch:main) `/docs/api/` ã®å†…å®¹ã‚’æœ€æ–°åŒ–ã—ã¦ã„ã¾ã™ã€‚

ãŸã ã—ã€[GitHub Actionsã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã‚ã‚‹ã¨ãŠã‚Š](https://docs.github.com/ja/actions/using-workflows/disabling-and-enabling-a-workflow#:~:text=%E3%83%91%E3%83%96%E3%83%AA%E3%83%83%E3%82%AF%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%81%A7%E3%81%AF%E3%80%8160%E6%97%A5%E9%96%93%E3%81%AB%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%81%AB%E3%82%A2%E3%82%AF%E3%83%86%E3%82%A3%E3%83%93%E3%83%86%E3%82%A3%E3%81%8C%E3%81%AA%E3%81%8B%E3%81%A3%E3%81%9F%E5%A0%B4%E5%90%88%E3%80%81%E3%82%B9%E3%82%B1%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%81%95%E3%82%8C%E3%81%9F%E3%83%AF%E3%83%BC%E3%82%AF%E3%83%95%E3%83%AD%E3%83%BC%E3%81%AF%E8%87%AA%E5%8B%95%E7%9A%84%E3%81%AB%E7%84%A1%E5%8A%B9%E5%8C%96%E3%81%95%E3%82%8C%E3%81%BE%E3%81%99%E3%80%82)ã€60æ—¥é–“ãƒªãƒã‚¸ãƒˆãƒªã«ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãŒãªã‹ã£ãŸå ´åˆã€Scheduled Workflowã¯è‡ªå‹•çš„ã«ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã—ã¾ã†ãŸã‚ã€

1. æ¯æ—¥ã®Workflowã®å®Ÿè¡Œæ™‚ã«ã€mainãƒ–ãƒ©ãƒ³ãƒã®æœ€å¾Œã®ã‚³ãƒŸãƒƒãƒˆã®æ—¥æ™‚ã¨ç¾åœ¨æ—¥æ™‚ã‚’æ¯”è¼ƒ
1. 59æ—¥ä»¥ä¸ŠçµŒéã—ã¦ã„ãŸã‚‰ã€mainãƒ–ãƒ©ãƒ³ãƒã«ç©ºã®ã‚³ãƒŸãƒƒãƒˆã‚’pushã™ã‚‹

ã¨ã„ã†æ–¹æ³•ã§Workflowã®è‡ªå‹•çš„ãªç„¡åŠ¹åŒ–ã‚’å›é¿ã—ã¦ã„ã¾ã™ï¼ˆã”ã‚ã‚“ãªã•ã„ï¼‰ã€‚

https://github.com/ttskch/jp-postal-code-api/blob/477735ab7f169e573f920af0b2aadb945ec1f0c4/.github/workflows/cron.yaml#L60-L90

[Workflowã®æœ‰åŠ¹åŒ–ã¯APIçµŒç”±ã§ã‚‚è¡Œãˆã‚‹](https://docs.github.com/ja/rest/actions/workflows?apiVersion=2022-11-28) ã®ã§ã€è‡ªå‹•çš„ã«ç„¡åŠ¹ã«ãªã£ãŸã‚‰APIçµŒç”±ã§å†åº¦æœ‰åŠ¹åŒ–ã™ã‚‹ã€ã¿ãŸã„ãªå¯¾å¿œã‚‚è€ƒãˆã‚‰ã‚Œã¾ã—ãŸãŒã€GitHub Actionsã ã‘ã§å®Œçµã§ããŸã»ã†ãŒå¬‰ã—ã„ã®ã§ã“ã®ã‚ˆã†ãªæ–¹æ³•ã‚’ã¨ã‚Šã¾ã—ãŸã€‚

# ãŠã‚ã‚Šã«

ä»Šã¾ã§ [madefor/postal-code-api](https://github.com/madefor/postal-code-api) ã‚’ã‚ã‚ŠãŒãŸãä½¿ã‚ã›ã¦ã„ãŸã ã„ã¦ã„ãŸã®ã§ã™ãŒã€é…ä¿¡ãƒ‡ãƒ¼ã‚¿ã®è‡ªå‹•æ›´æ–°ãŒ3å¹´ä»¥ä¸Šæ­¢ã¾ã£ãŸã¾ã¾ã«ãªã£ã¦ã—ã¾ã£ã¦ãŠã‚Šã€[2024/01/01ã«ã‚ã£ãŸæµœæ¾å¸‚ã®å¸‚ç”ºæ‘å¤‰æ›´](https://www.post.japanpost.jp/zipcode/merge/index.html) ãŒå–ã‚Šè¾¼ã¾ã‚Œã¦ã„ãªã‹ã£ãŸãŸã‚ã«ç›´è¿‘ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ¯ãƒ¼ã‚¯ã§å•é¡ŒãŒç™ºç”Ÿã—ã¦ã—ã¾ã„ã¾ã—ãŸã€‚

åˆã‚ã¯ãƒ“ãƒ«ãƒ‰å‘¨ã‚Šã‚’ä¿®æ­£ã—ã¦Pull Requestã‚’é€ã‚ã†ã¨æ€ã£ãŸã®ã§ã™ãŒã€æ—¢å­˜ã®Pull RequestãŒæ”¾ç½®ã•ã‚Œã¦ã„ãŸã‚Šã€å®Ÿè³ªçš„ã«é–‹ç™ºãŒåœæ­¢ã—ã¦ã—ã¾ã£ã¦ã„ã‚‹ã‚ˆã†ã«ãŠè¦‹å—ã‘ã—ãŸãŸã‚ã€ã‚€ã—ã‚è‡ªåˆ†ãŒãƒ¡ãƒ³ãƒ†ã—ã‚„ã™ã„æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ã§ä½œã‚Šç›´ã—ã¦é•·æœŸçš„ã«ãƒ›ã‚¹ãƒˆã—ç¶šã‘ã‚‹ã»ã†ãŒå¹¸ç¦åº¦ãŒé«˜ã„ã‹ãªã¨æ€ã„ã€ã‚ãˆã¦å†å®Ÿè£…ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚

éƒµä¾¿ç•ªå·ã‚’å…¥åŠ›ã—ãŸã‚‰è‡ªå‹•ã§ä½æ‰€ãŒè£œå®Œã•ã‚Œã‚‹ãƒ•ã‚©ãƒ¼ãƒ ã®å®Ÿè£…ã¨ã‹ã§æ°—è»½ã«ä½¿ã£ã¦ã„ãŸã ã‘ãŸã‚‰å¬‰ã—ã„ã§ã™ã€‚

**<https://github.com/ttskch/jp-postal-code-api>**

Issueã‚„Pull Requestã¯ã„ã¤ã§ã‚‚å¤§æ­“è¿ã§ã™ã€‚ã‚ã¨ã€ã“ã‚Œã¯å¤§äº‹ãªã“ã¨ã§ã™ãŒã€**ãƒªãƒã‚¸ãƒˆãƒªã«Starã‚’ä»˜ã‘ã¦ã„ãŸã ã‘ã‚‹ã¨ç§ã®ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ãŒä¸ŠãŒã‚Šã¾ã™** ã®ã§ã€ã‚ˆã‚ã—ã‘ã‚Œã°æ˜¯éãŠé¡˜ã„ã—ã¾ã™ğŸ˜‹
