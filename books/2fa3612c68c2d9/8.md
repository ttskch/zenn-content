---
title: "ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»é¢ã‚’å®Ÿè£…"
---

# ã“ã®ç« ã«å¯¾å¿œã™ã‚‹ã‚³ãƒŸãƒƒãƒˆ

* [ğŸ“ ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»é¢ã‚’å®Ÿè£…](https://github.com/ttskch/symfony-example-app/commit/b55c6f3d17443bd04af85c897ffc68b3ec3565bf)

> ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã¯æ—¥æœ¬èªã¨è‹±èªã«å¯¾å¿œã™ã‚‹ãŸã‚ã™ã¹ã¦ã®æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã‚’ç¿»è¨³ã—ã¦ã„ã‚‹ã®ã§ã€ã‚³ãƒŸãƒƒãƒˆã®å†…å®¹ã¯æœ¬æ–‡ã®è§£èª¬ã¨è‹¥å¹²ç•°ãªã‚Šã¾ã™ã€‚

# ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»é¢ã‚’å®Ÿè£…

ç¾çŠ¶ã€ç®¡ç†è€…ãŒã‚¢ãƒ—ãƒªå†…ã®å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æƒ…å ±ã‚’èª­ã¿æ›¸ãã™ã‚‹ãŸã‚ã®CRUDã¯å®Œæˆã—ã¦ã„ã¾ã™ãŒã€ã“ã‚Œã¨ã¯åˆ¥ã«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè‡ªåˆ†è‡ªèº«ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’èª­ã¿æ›¸ãã™ã‚‹ãŸã‚ã®ç”»é¢ã‚‚å¿…è¦ã§ã™ã€‚

æ¬¡ã¯ã“ã‚Œã‚’å®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚

ã¨è¨€ã£ã¦ã‚‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®CRUDã«ç”»é¢ã‚’å°‘ã—ä»˜ã‘è¶³ã™ã ã‘ã§ã€ç‰¹ã«é›£ã—ã„ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ğŸ‘

## ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©

```php
/**
 * @Route("/profile", name="profile_show", methods={"GET"})
 */
public function profileShow()
{
    return [
        'user' => $this->getUser(),
    ];
}
```

```php
/**
 * @Route("/profile/edit", name="profile_edit", methods={"GET", "POST"})
 */
public function profileEdit(Request $request)
{
    $form = $this->createForm(UserEditType::class, $user = $this->getUser());
    $form->handleRequest($request);

    if ($form->isSubmitted() && $form->isValid()) {
        $this->em->persist($user);
        $this->em->flush();

        $this->addFlash('success', 'ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®ç·¨é›†ãŒå®Œäº†ã—ã¾ã—ãŸã€‚');

        return $this->redirectToRouteOrReturn('user_profile_show');
    }

    return $this->render('user/profile_edit.html.twig', [
        'user' => $user,
        'form' => $form->createView(),
    ];
}
```

```php
/**
 * @Route("/profile/change_password", name="profile_change_password", methods={"GET", "POST"})
 */
public function profileChangePassword(Request $request)
{
    $user = $this->getUser();

    $form = $this->createForm(UserChangePasswordType::class);
    $form->handleRequest($request);

    if ($form->isSubmitted() && $form->isValid()) {
        $user->plainPassword = $form->get('newPassword')->getData();

        $this->em->persist($user);
        $this->em->flush();

        $this->addFlash('success', 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®å¤‰æ›´ãŒå®Œäº†ã—ã¾ã—ãŸã€‚');

        return $this->redirectToRouteOrReturn('user_profile_show');
    }

    return $this->render('user/profile_change_password.html.twig', [
        'user' => $user,
        'form' => $form->createView(),
    ];
}
```

## ãƒ“ãƒ¥ãƒ¼

ä¾‹ã«ã‚ˆã£ã¦å…¨æ–‡è¨˜è¼‰ã¯é¿ã‘ã¾ã™ã®ã§å®Ÿéš›ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ã¦ã¿ã¦ãã ã•ã„ğŸ™

* [user/profile_show.html.twig](https://github.com/ttskch/symfony-example-app/blob/b55c6f3d17443bd04af85c897ffc68b3ec3565bf/templates/user/profile_show.html.twig)
* [user/profile_edit.html.twig](https://github.com/ttskch/symfony-example-app/blob/b55c6f3d17443bd04af85c897ffc68b3ec3565bf/templates/user/profile_edit.html.twig)
* [user/profile_change_password.html.twig](https://github.com/ttskch/symfony-example-app/blob/b55c6f3d17443bd04af85c897ffc68b3ec3565bf/templates/user/profile_change_password.html.twig)

ã¤ã„ã§ã«ã€ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»é¢ã¸ã®å‹•ç·šã¨ã—ã¦ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒŠãƒ“ã®å³ä¸Šã«ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚

* [base.html.twig](https://github.com/ttskch/symfony-example-app/commit/b55c6f3d17443bd04af85c897ffc68b3ec3565bf#diff-5a6565b208e6ab8222ae5be3180f45af0410b09d94250b64f42d7e7041bd4250)

ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã«ã¯ã€ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒªãƒ³ã‚¯ã‚„ [switch_user](https://symfony.com/doc/current/security/impersonating_user.html) ï¼ˆãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã§ã¯ `ä»£ç†ãƒ­ã‚°ã‚¤ãƒ³` ã¨è¡¨ç¾ã—ã¦ã„ã¾ã™ï¼‰ã‹ã‚‰æŠœã‘ã‚‹ãŸã‚ã®ãƒªãƒ³ã‚¯ã‚‚è¨­ç½®ã—ã¦ã„ã¾ã™ã€‚ï¼ˆã‚‚ã¡ã‚ã‚“ã“ã‚Œã¯ä»£ç†ãƒ­ã‚°ã‚¤ãƒ³ä¸­ã«ã—ã‹è¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ï¼‰

ã“ã‚Œã§ã€ç„¡äº‹ã«ä¸‹å›³ã®ã‚ˆã†ã«ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»é¢ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸğŸ™Œ

![](https://tva1.sinaimg.cn/large/0081Kckwgy1gkuk9kyuogj31x90u0gr3.jpg)
